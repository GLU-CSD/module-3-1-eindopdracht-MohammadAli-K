define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,r){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[70368],{4990:function(e){e.exports={id:"798c949cd80f6302dccf32a072374d9a4f279789f52f4a005298774225cc6975"}},87923:function(e,t,n){"use strict";var r=n(89575),a=n(17502),l=n(85959),o=n(23215),i=n(71156),c=n(54987),s=n(32501);const d=["linkStyle"],u=l.forwardRef(((e,t)=>{let{linkStyle:n}=e,u=(0,a.A)(e,d);switch(n){case"navigational":return l.createElement(c.q,(0,r.A)({},u,{forwardedRef:t}));case"navigational-sale":return l.createElement(s.T,(0,r.A)({},u,{forwardedRef:t}));case"icon":return l.createElement(i.g,(0,r.A)({},u,{forwardedRef:t}));default:return l.createElement(o.Y,(0,r.A)({},u,{forwardedRef:t}))}}));t.A=u},38608:function(e,t,n){"use strict";var r;n.d(t,{b:function(){return r}}),function(e){e.OPT_IN="/plus/consent",e.RELEASE_RADAR="/plus/release-radar"}(r||(r={}))},53173:function(e,t,n){"use strict";n.d(t,{j:function(){return b}});var r=n(85959),a=n(30812),l=n.n(a),o=n(5073),i=n(51599),c=n(10170),s=n(38856),d=n(2673),u=n(52130),m=n(52517);const E={day:"numeric",month:"long",year:"numeric"},v={hour:"numeric",minute:"numeric",hour12:!1},y=(e,t,n)=>{const r=/\[(.*?)\]/g;let a=r.exec(e);const l=new Array;for(;null!=a;)l.push({exactMatch:a[0]||"",placeholder:a[1]||"",index:a.index}),a=r.exec(e);if(0===l.length)return;const o=l.find((e=>e.placeholder.toLowerCase()==="Date".toLowerCase()));if(!o)return;e=e.replace(o.exactMatch,t.date);const i=l.find((e=>e.placeholder.toLowerCase()==="Time".toLowerCase()));return i&&(e=e.replace(i.exactMatch,null!=n?n:t.time)),e};var f=e=>{let{text:t,releaseDate:n}=e;const[a,l]=r.useState(y(t,n,""));return r.useEffect((()=>{l(y(t,n))}),[]),r.createElement("span",null,a)};var p=e=>{let{text:t,releaseDate:n}=e;const a=n&&r.createElement(f,{text:t,releaseDate:n});return r.createElement(d.Ay,{preset:u.nx.body,color:u.r7.primary,font:u.KQ.serif},a||t)},g=n(42768),x=n(85202),A=n(73127);var T=e=>{let{cta:t,ctaType:n,onClick:a}=e;const l=()=>{a(),t.uri&&(window.location.href=t.uri)};return t.text?"PRIMARY"===n?r.createElement(x.j,{className:g.$3,label:t.text,onClick:l}):r.createElement(A.t,{className:g.$3,label:t.text,onClick:l}):null},h=n(55124),N=n(36124),_=n(87923),L=n(96545);var C=e=>{let{cta:t,onClick:n,tools:a}=e;return t.text?r.createElement(d.Ay,{preset:u.nx.bodySmallBold},r.createElement(_.A,{size:L.s.medium,linkStyle:"navigational",onClick:()=>{n(),a.customer.performLogin({})},style:{cursor:"pointer"}},t.text)," ",r.createElement(N.A,{src:h.A,fontSize:"custom"})):null};var b=e=>{let{title:t,header:n,releaseDate:a,locale:y,description:f,cta:g,ctaType:x,footer:A,showFooterCta:h,onCtaClick:N,onFooterCtaClick:_,tools:L}=e;var b,S,O;const k=void 0!==a?((e,t)=>{if(!e)return;const n=new Date(e);return{date:n.toLocaleString(t,E),divider:"@",time:n.toLocaleString(t,v).toLocaleLowerCase(t)}})(a,y):void 0;return r.createElement("div",{className:l()(o.OL,i.F9z,c.cgu,s.vF)},n&&r.createElement("div",{className:l()(o.OL,s.Fn)},(null==n?void 0:n.logo)&&r.createElement(m.Ay,{src:null==n||null==(b=n.logo)?void 0:b.uri,width:null==n||null==(S=n.logo)?void 0:S.width,className:c.HaJ}),r.createElement(d.Ay,{preset:u.nx.bodyLarge,tag:"h2"},n.label)),r.createElement("div",{className:l()(c.aUF)},r.createElement(d.Ay,{preset:u.nx.bodyBold,tag:"p"},t)),f&&r.createElement("div",{className:l()(c.E0r)},r.createElement(p,{text:f,releaseDate:k})),g&&r.createElement("div",{className:l()(c.aUF)},r.createElement(T,{ctaType:x,cta:g,onClick:N})),h&&(null==A||null==(O=A.cta)?void 0:O.uri)&&r.createElement("div",{className:l()(c.aUF)},r.createElement(d.Ay,{preset:u.nx.bodySmall},A.text),"Â ",A.cta&&r.createElement(C,{cta:A.cta,onClick:_,tools:L})))}},57235:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var r,a,l=n(85959),o=n(29443),i=n(11506),c=n(32740),s=n(10170),d=n(53173),u=n(89862);!function(e){e.PDP_TRACKING_CATEGORY="product detail page",e.LOYALTY_EVENT_TRIGGER_NAME="loyalty_opt_in_placement.priority_access",e.LOYALTY_EVENT_BONUS_POINTS_TRIGGER_NAME="loyalty_bonus_points_banner"}(r||(r={})),function(e){e.VIEW_CONTENT="view_content",e.SELECT_CONTENT="select_content"}(a||(a={}));const m=(e,t,n)=>({content_id:e,legacy_event_name:t,event_trigger_name:n}),E=(e,t,n)=>{e.track({name:u.bD,context:{customCategory:r.PDP_TRACKING_CATEGORY,customActionSuffix:"banner",customLabel:t+".cta."+n}})};var v=e=>{let{banner:t,inStock:n,locale:r,tools:a}=e;const{releaseDate:o,header:i,footer:c,description:s,cta:u,title:m}=(e=>{var t,n,r,a,l,o,i,c,s,d;return{header:{label:(null==e||null==(t=e.header)?void 0:t.label)?e.header.label:void 0,logo:{width:(null==e||null==(r=e.header)||null==(n=r.logo)?void 0:n.width)?e.header.logo.width:void 0,uri:(null==e||null==(l=e.header)||null==(a=l.logo)?void 0:a.uri)?e.header.logo.uri:void 0}},title:null!=(c=e.title)?c:void 0,releaseDate:null!=(s=e.releaseDate)?s:void 0,description:null!=(d=e.description)?d:void 0,cta:(null==e?void 0:e.cta)?{text:e.cta.text,uri:e.cta.uri}:void 0,footer:{text:(null==e||null==(o=e.footer)?void 0:o.text)?e.footer.text:void 0,cta:(null==e||null==(i=e.footer)?void 0:i.cta)?{text:e.footer.cta.text,uri:e.footer.cta.uri}:void 0}}})(t),[v,y]=l.useState(u);l.useEffect((()=>{v&&y({...v,uri:v.uri.replace(/\/+$/,"")+"/?redirect_url="+encodeURIComponent(window.location.href)})}),[]);const f=n?"PRIMARY":"SECONDARY";return l.createElement(d.j,{header:i,title:m,locale:r,releaseDate:o,footer:c,description:s,cta:v,onCtaClick:()=>{E(a.tracking,t.id,"button")},onFooterCtaClick:()=>{E(a.tracking,t.id,"link")},ctaType:f,showFooterCta:!0,tools:a})},y=n(30812),f=n.n(y),p=n(51599),g=n(5073),x=n(38856),A=n(2673),T=n(52130),h=n(15184),N=n(22837),_=n(29817);const L={hour:"numeric",minute:"numeric",hour12:!1},C={dateFormatOptions:{day:"numeric",month:"long",year:"numeric"},dateTimeDivider:" @ ",timeFormatOptions:L},b={...C,dateTimeDivider:" um "},S={...C},O={...C,dateTimeDivider:" alle "},k={"de-DE":b,"en-GB":{...C,timeFormatOptions:{...L,hour12:void 0,hourCycle:"h12"}},"fr-FR":S,"nl-NL":{...C},"it-IT":O,"de-CH":b,"fr-CH":S,"it-CH":O,"de-AT":b},P=(e,t)=>{if(!e)return null;const n=new Date(e);var r;const{dateFormatOptions:a,dateTimeDivider:l,timeFormatOptions:o}=null!=(r=k[t])?r:C;return{date:n.toLocaleString(t,a),divider:l,time:n.toLocaleString(t,o).toLocaleLowerCase(t)}},w=e=>{var t;const n=null==(t=e.split("?"))?void 0:t[1];return new URLSearchParams(n).get("context")};var R=e=>{let{locale:t,releaseDate:n}=e;const r=P(n,t),[a,o]=l.useState((null==r?void 0:r.date)||"");return l.useEffect((()=>{const e=P(n,t),r=(null==e?void 0:e.date)+" "+(null==e?void 0:e.divider)+" "+(null==e?void 0:e.time);o(e?r:a)}),[]),l.createElement("span",null,a)};var D=e=>{let{locale:t,banner:n,isDesignerExperience:r}=e;const a=null==n?void 0:n.title,o=null==n?void 0:n.description,i=null==n?void 0:n.releaseDate;return l.createElement(h.Sv,{colorScheme:N.z.monochromeLight},l.createElement("div",{className:f()(g.OL,s.cgu,x.vF,p.JSK)},l.createElement("div",{className:f()(g.OL,x.Fn)},l.createElement(_.A,{logo:"LoyaltyPoints",size:"s"})),a&&l.createElement("div",{className:f()(s.aUF,s.Cou)},l.createElement(A.Ay,{preset:r?T.nx.h4:T.nx.bodyLargeBold,tag:"p"},a)),o&&l.createElement(A.Ay,{preset:T.nx.body},o),i&&l.createElement(A.Ay,{preset:T.nx.bodyBold},l.createElement(R,{locale:t,releaseDate:i}))))},I=n(21775),F=n(71016),Y=n(42768),G=n(85202),B=n(87923),U=n(96545),z=n(36124),M=n(41825),V=n(3090),K=n(38608),W=n(55124);var $=e=>{let{locale:t,banner:n,loyaltyPointsProgram:o,isDesignerExperience:i,tracking:c,entityId:d}=e;const{header:E,title:v,description:y,cta:_,footer:L}=n,{icon:C,tier:b}=null!=o?o:{},S=P(null==n?void 0:n.releaseDate,t),O=i?[M.FQ,M.Ae,M.Nd,M.s7,M.$A,M.e6,M.b_,M.Ku]:[],k=e=>{e&&(e.startsWith(K.b.OPT_IN)?(((e,t)=>{const n={name:a.SELECT_CONTENT,context:m(t,u.bD,r.LOYALTY_EVENT_TRIGGER_NAME)};e.trackStandalone(n)})(c,d),I.trigger(V.x.OPEN,{context:w(e)})):window.location.href=e)};var R;return l.createElement(h.Sv,{colorScheme:i?N.z.monochromeLight:N.z.monochromeDark},l.createElement("div",{className:f()(g.OL,s.cgu,x.vF,p.GUV,...O)},E?l.createElement("div",{className:f()(g.OL,x.Fn)},l.createElement(F.A,{logo:"LoyaltyPointsTile",logoLabel:null==b?void 0:b.name,icon:C,size:"s",label:null!=(R=E.label)?R:""})):null,v?l.createElement("div",{className:s.aUF},l.createElement(A.Ay,{preset:T.nx.bodyBold,tag:"p"},v)):null,y?l.createElement("div",{className:s.E0r},l.createElement(A.Ay,{preset:T.nx.body},y)):null,S?l.createElement(A.Ay,{preset:T.nx.bodyBold},(null==S?void 0:S.date)+" "+(null==S?void 0:S.divider)+" "+(null==S?void 0:S.time)):null,_?l.createElement("div",{className:f()(s.aUF)},l.createElement(G.j,{className:f()(Y.$3),label:_.text,onClick:()=>k(null==_?void 0:_.uri)})):null,L?l.createElement("div",{className:s.aUF},l.createElement(A.Ay,{preset:T.nx.bodySmall},L.text),L.cta?l.createElement(l.Fragment,null,l.createElement(B.A,{size:U.s.medium,linkStyle:"navigational",onClick:()=>{var e;return k(null==L||null==(e=L.cta)?void 0:e.uri)},style:{cursor:"pointer"}},L.cta.text)," ",l.createElement(z.A,{src:W.A,fontSize:"custom"})):null):null))},j=n(4990),H=n.n(j),J=(0,c.tile)().withQueries((e=>{let{entity:t}=e;return{data:{query:H(),variables:{id:t.id}}}})).withTracking((e=>({def:o.def,context:{id:e.entity.id}}))).withProcessDependencies((e=>{if(!e||!e.data)return{action:"error",message:"Invalid product"};const{product:t,loyaltyPointsProgram:n}=e.data;return t?{action:"render",data:{product:t,loyaltyPointsProgram:n}}:{action:"error",message:"Invalid product"}})).withRender((e=>{let{context:{experience:t,locale:n},data:o,entity:d,tools:E}=e;const{product:y,loyaltyPointsProgram:f}=o,{segmentCommunication:p,inStock:g}=y;if(!p)return null;const x=["LOYALTY_POINTS_EARLY_ACCESS","LOYALTY_POINTS_PRIORITY_ACCESS"].includes(null==p?void 0:p.kind),A="LOYALTY_POINTS_BONUS_POINTS"===(null==p?void 0:p.kind),{experienceName:T}=(0,i.q)(t),h=T.isDesigner(),N=d.id;return l.createElement(c.ViewTracker,{onVisible:()=>(e=>{let{tracking:t,bannerId:n,entityId:l,isLoyaltyPointsBanner:o,isLoyaltyPointsBonusPointsBanner:i}=e,c="";o?c=r.LOYALTY_EVENT_TRIGGER_NAME:i&&(c=r.LOYALTY_EVENT_BONUS_POINTS_TRIGGER_NAME);const s={name:a.VIEW_CONTENT,context:m(l,u.wc,c)};t.trackStandalone(s),t.track({name:u.wc,context:{customCategory:r.PDP_TRACKING_CATEGORY,customActionSuffix:"banner",customLabel:n}})})({tracking:null==E?void 0:E.tracking,bannerId:null==p?void 0:p.id,entityId:N,isLoyaltyPointsBanner:x,isLoyaltyPointsBonusPointsBanner:A})},l.createElement("div",{className:s.hkP},x?l.createElement($,{locale:n,banner:p,loyaltyPointsProgram:f,isDesignerExperience:h,tracking:E.tracking,entityId:N}):A?l.createElement(D,{locale:n,banner:p,isDesignerExperience:h}):l.createElement(v,{banner:p,inStock:g,locale:n,tools:E})))}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=r}},function(e){return e.O(0,[29674],(function(){return t=57235,e(e.s=t);var t})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/product_segmented-banner/index-ce3245d2794fa99e8d8e.map