define(["classnames","react","react-dom","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,a,r){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[45332],{58032:function(e){e.exports={id:"482e9a7579b9150dd01829aeb177cd3f4cf61568b2f3db099cc768906356f9a3"}},39977:function(e){e.exports={id:"f1370134f1f1d9378454b1144296ae2f9f02977668930c5cdc90586f632de35f"}},76119:function(e){e.exports={id:"4d9b692adc3aea602110a8fa3d496b6290fed589cbe3d8fa17f650751998bae1"}},13421:function(e){e.exports={id:"f9788bafbf3e7694263a81c3dbb7022122f419079e7d01e30d441df5fe03133a"}},68852:function(e,t,n){"use strict";n.d(t,{fs:function(){return E},Ay:function(){return v}});var a=n(89575),r=n(17502),o=n(64338),s=n(67170),l=n(30812),i=n.n(l),c=n(85959),d=n.n(c),u=n(24741),f=n(61104),m=n(2673),b=n(52130);const p="ZDS_FORM_CLEAR",g=["className","message","id","rows","disableResize","hideLabel","label","disabled","onChange","maxLength","onBlur","onFocus","onMouseEnter","onMouseLeave","required","labels","suffix","disableSuffixSpacing"],E=d().forwardRef(((e,t)=>{const{className:n,message:l,id:c,rows:E=2,disableResize:v=!1,hideLabel:_=!1,label:y,disabled:h,onChange:N,maxLength:w,onBlur:k,onFocus:x,onMouseEnter:L,onMouseLeave:A,required:S,labels:C,suffix:D,disableSuffixSpacing:O=!1}=e,T=(0,r.A)(e,g),{active:B,handleOnBlur:I,handleOnFocus:M,handleOnMouseEnter:R,handleOnMouseLeave:F}=(0,o.k)({onMouseEnter:L,onMouseLeave:A,onBlur:k,onFocus:x}),[U,V]=d().useState(Boolean("")),P="number"==typeof w,[K,H]=d().useState(P?0:void 0);let G;!0===S?G=C&&C.required||"*":void 0!==S&&!1===S&&(G=C&&C.optional||"");const j=d().useRef(null),X=d().useCallback((e=>{e&&(j.current=e,t&&(t.current=e),j.current.addEventListener(p,(()=>{P&&H(0),V(!1)})))}),[t]);let z=c;z||(z="textarea-"+(0,s.v)());const q=l&&l.type===u.G.ERROR;return d().createElement("div",{className:i()(n,"_0xLoFW _78xIQ-")},!_&&d().createElement("label",{htmlFor:z,className:i()("_9IXfHD voFjEy goVnUa m3OCL3 Q1UH4S wYGQO3 _2sk4iC _8D09HN _99qBVG n4kyHD _9bx9k9 xEnSvs e5GQII X9zxwl",h?"AbrXsY _kokww HlZ_Tf":B?"clL0TQ":q?"nz3KSh f7D34i EvwuKo pU4jGH":"AGyQQq HlZ_Tf _kokww")},y,G&&d().createElement("span",{className:"ukMezw voFjEy goVnUa m3OCL3 _3LATVU"},G)),d().createElement("div",{className:i()("AemEXe JT3_zV _0xLoFW",h?"voFjEy goVnUa m3OCL3 nXkCf3 HlZ_Tf x7LsVH gcK-9K AbrXsY":B?"_3DErZh":q?"Y4WL9O":U?"j1EvvJ":"gcK-9K")},d().createElement("textarea",(0,a.A)({ref:X,className:i()("iiZw8J oosgvo voFjEy _2kjxJ6 m3OCL3 bsVOrE mo6ZnF dUMFv9 K82if3 LyRfpJ HlZ_Tf NN8L-8 _3laWWw Vn-7c-",v&&"_0ZsMJ")},h&&{disabled:!0},{id:z,rows:E},P&&{maxLength:w},T,S&&{required:S},{onChange:e=>{const{target:t}=e;P&&H(t.value.length),"function"==typeof N&&N(e),V(Boolean(t.value))}},_&&{"aria-label":"string"==typeof y?y:void 0},{onMouseEnter:R,onMouseLeave:F,onFocus:M,onBlur:I})),D&&d().createElement("div",{className:i()("_0xLoFW uEg2FS K82if3",!O&&"q84f1m snL7ze _99qBVG")},D),P&&d().createElement("div",{className:"KVKCn3 df4QKn SmOhEI XfNx0j","data-char-count":"true"},d().createElement(m.Ay,{preset:b.nx.bodyExtraSmall},K," / ",w))),l&&d().createElement(f.A,l))}));E.displayName="TextArea";var v=E},39333:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var a=n(85959),r=n(30812),o=n.n(r),s=n(10170),l=n(52130),i=n(2673),c=n(91936);const d=e=>{let{message:t,preset:n,action:r,Icon:d}=e;return a.createElement(c.E,{action:r,timeout:3e3,ariaLive:t,preset:n},d&&a.createElement(d,{color:l.r7.inverse,fontSize:"custom"}),a.createElement(i.Ay,{className:o()({[s.uB3]:!!d}),color:l.r7.inverse,preset:l.nx.body},t))}},40059:function(e,t,n){"use strict";n.d(t,{C4:function(){return d},CJ:function(){return s},Ds:function(){return c},Gv:function(){return o},L7:function(){return u},LC:function(){return l},MY:function(){return a},b4:function(){return i},jy:function(){return r}});const a="EVENT_PROVIDE_ITEM_VIDEO_DATA",r="EVENT_CALCULATE_VIDEO_CANDIDATES",o="EVENT_BOARD_ITEMS_VISIBLE",s="EVENT_BOARD_CURRENTLY_VISIBLE_ITEM",l="EVENT_BOARD_CLOSE_FULLSCREEN_VIEW",i="EVENT_SHOW_BOARDS_NOTIFICATION",c="EVENT_SHOW_ADD_TO_BOARDS_MODAL",d="EVENT_USER_BOARD_UPDATED",u="EVENT_OPEN_EDIT_BOARD_NAME_SCREEN"},5339:function(e,t,n){"use strict";var a=n(76119);t.A=e=>{let{tools:{executeMutation:t},id:n,name:r,entities:o}=e;const s="updateBoard-"+r,l={defaultLanguage:"und",translations:{text:r,language:"und"}};return t({...a,variables:{UpdateUserBoardInput:{id:n,name:l,entities:o,clientMutationId:s}}})}},10870:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"collection_board-creation-modal":["boards.saved.success","boards.saved.add.cta","boards.create.title.cta.cancel","boards.update.title.header","boards.create.title.header","boards.update.title.cta","boards.create.title.cta","boards.create.error","boards.edit.error","boards.saved.success.message.plural","boards.saved.success.cta.plural","boards.saved.success.message.singular","boards.saved.success.cta.singular","boards.saved.popup.select","boards.saved.popup.create","boards.saved.popup.done","boards.create.title.charlimit","boards.create.title.placeholder","boards.create.title.charlimit.error","boards.saved.popup.item.plural","boards.saved.popup.item.singular"]}},19569:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xe}});var a=n(85959),r=n.n(a),o=n(21775),s=n.n(o),l=n(32740),i=n(40059),c=n(39977),d=n(58032);const u=(e,t)=>{const n={name:"select_content",context:{content_id:t,component_name:"pdp_popup",event_trigger_name:"add_to_board_clicked|||sku:"+t}};e.trackStandalone(n)};var f=n(28258),m=n(30812),b=n.n(m),p=n(5339),g=n(32099),E=n(10170),v=n(5073),_=n(38856),y=n(59890),h=n(73127),N=n(85202),w=n(76349),k=n(37983),x=n(2673),L=n(52130),A=n(68852),S=n(24741),C=n(36124),D=n(76309);function O(e){let{isMobile:t,disabled:n,boardName:r,updateBoardName:o}=e;const s=a.useRef(null);return a.useEffect((()=>{setTimeout((()=>{var e;null==s||null==(e=s.current)||e.focus()}),200)}),[]),a.createElement(a.Fragment,null,a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n  #create-board-input-container > div > div {\n    box-shadow: none !important;\n  }\n\n  #create-board-input-container textarea {\n    line-height: 4rem;\n    font-weight: 700;\n    white-space: normal;\n    padding: 0;\n  }\n\n\n  #create-board-input-container textarea::placeholder  {\n    color: #d0d1d3 !important;\n    line-height: 4rem;\n    font-weight: 700;\n  }\n"}}),a.createElement("div",{className:b()(_.BY),style:{borderRadius:"50px",backgroundColor:"rgba(233, 247, 227, 1)",padding:"3px 6px 6px 6px"}},a.createElement(x.Ay,{color:L.r7.secondary,preset:L.nx.bodyExtraSmall},__("boards.create.title.charlimit",r.length.toString(),"37"))),a.createElement("div",{className:g.Gm,style:{height:350}},a.createElement("div",{id:"create-board-input-container"},a.createElement(A.fs,{ref:s,"data-testid":"board_name_input",tabIndex:0,hideLabel:!0,disabled:n,disableResize:!0,id:"create-board-input",name:"create-board-input",className:b()(g.Gm,E.QgQ),style:{height:t?"calc(100vh - 300px)":300,fontSize:56},value:r,onInput:e=>o(e.target.value),placeholder:__("boards.create.title.placeholder"),message:r.length>=38?{type:S.G.ERROR,icon:a.createElement(C.A,{src:D.A}),label:__("boards.create.title.charlimit.error")}:void 0}))))}var T=n(13421);var B=e=>{let{tools:{executeMutation:t},name:n,entities:a}=e;return t({...T,variables:{CreateUserBoardInput:{name:{defaultLanguage:"und",translations:{text:n,language:"und"}},entities:a,clientMutationId:"createBoard-"+n}}})},I=n(39333);const M=new y.l,R=e=>{let{isMobile:t,CtaLabel:n,boardIsSaving:r,boardNameInput:o,closeDialog:s,primaryCtaClicked:l}=e;return a.createElement("div",{className:b()(v.OL,g.Gm,E.IuV,{[_.Gs]:!t}),style:{background:"white",gap:"15px"}},!t&&a.createElement(h.t,{type:"button",onClick:s,label:__("boards.create.title.cta.cancel")}),a.createElement(N.j,{"data-testid":"board_name_popup",type:"button",onClick:l,label:n,style:{width:t?"100%":120},disabled:r||o.length<1||o.length>=38,state:r?w.w.LOADING:w.w.INITIAL}))},F=e=>a.createElement(I.z,{message:e,preset:"error"}),U=e=>{let{tools:t,isEditMode:n,initialSku:r,board:o,showDialog:l,isMobile:i,setShowBoardNameDialog:c}=e;const[d,u]=a.useState(""),[m,g]=a.useState(!1),y=t.tracking,h=n?__("boards.update.title.header"):__("boards.create.title.header"),N=n?__("boards.update.title.cta"):__("boards.create.title.cta");a.useEffect((()=>{n&&(null==o?void 0:o.name)&&u(o.name)}),[n]);const w=()=>{M.emit("close"),u(""),c(!1),((e,t)=>{const n={name:"select_content",context:{component_name:t?"title_edit":"create_title",event_trigger_name:"exit_screen"}};e.trackStandalone(n)})(y,n)};a.useEffect((()=>{l?M.emit("open"):w()}),[l]);return a.createElement(a.Fragment,null,a.createElement(k.A,{"data-testid":"board_name_popup",bus:M,onClose:w,footer:a.createElement(R,{isMobile:i,CtaLabel:N,boardIsSaving:m,boardNameInput:d,closeDialog:w,primaryCtaClicked:()=>{n?(async()=>{var e;g(!0);const n=null==o||null==(e=o.entities.nodes)?void 0:e.map((e=>"id"in e?e.id:""));if((null==o?void 0:o.id)&&(null==n?void 0:n.length)){try{(await(0,p.A)({tools:t,id:o.id,name:d,entities:n})).errors?f.h.show(F(__("boards.edit.error"))):(s().trigger("EVENT_USER_BOARD_UPDATED"),((e,t)=>{const n={name:"select_content",context:{component_name:"title_edit",event_trigger_name:"save_title|||title:"+t}};e.trackStandalone(n)})(y,d),window.location.href="/your-boards/"+o.id.split(":ucm:")[1])}catch{f.h.show(F(__("boards.edit.error")))}g(!1)}})():(async e=>{g(!0);const n="ern:content::basic-product:"+r;try{const r=await B({tools:t,name:e,entities:[n]});if(r.errors)f.h.show(F(__("boards.create.error")));else{var a,o;const t=null==(o=r.data)||null==(a=o.createUserBoard)?void 0:a.id;((e,t)=>{const n={name:"select_content",context:{content_id:t,event_trigger_name:"create_board|||title:"+t}};e.trackStandalone(n)})(y,e),t&&(window.location.href="/your-boards/"+t.split(":ucm:")[1])}}catch(e){f.h.show(F(__("boards.create.error")))}w(),g(!1)})(d)}}),header:()=>a.createElement(x.Ay,{preset:L.nx.h5},i&&h)},a.createElement(a.Fragment,null,a.createElement("div",{className:b()(v.OL,_.vF,_.rX)},!i&&a.createElement(x.Ay,{className:b()(E.uvl,E.Ol8),color:L.r7.primary,preset:L.nx.h4},h),a.createElement(O,{isMobile:i,disabled:m,boardName:d,updateBoardName:u})))))};var V=n(5239),P=n(43168),K=n(29556),H=n(58168),G=n(98587),j=n(12280),X=n(75887),z=n(79624),q=n(39389),Q=n(50696),W=n(4906);const Z=["bus","status","disableClickTrigger","style","forwardedRef"],J=["onMouseEnter","onMouseLeave","onFocus","onBlur","onClick","onKeyDown","tabIndex","ref","className"],Y=["children","forwardedRef","disableClickTrigger"];var $=e=>{const{children:t,forwardedRef:n,disableClickTrigger:o=!1}=e,s=(0,G.A)(e,Y),[l,i]=(0,Q.D)(j.Ay),{bus:c,status:d,triggerRef:u,style:{trigger:f}}=l;(0,a.useEffect)((()=>{d===W.U.OPEN&&setTimeout((()=>c.emit("toggle",{dontTrack:!0})),0)}),[]);const m=r().useCallback((()=>{u&&u.blur()}),[u]);(0,a.useEffect)((()=>(c.on("trigger:blur",m),()=>{c.off("trigger:blur",m)})),[u,m]);const p=e=>{"function"==typeof n&&n(e),!e||u&&u===e||i({triggerRef:e})};if("function"==typeof t)return t((g=Object.assign({},e,{handleRef:p,bus:c,status:d,style:{triggerStyle:f}}),e=>{void 0===e&&(e={});const{bus:t,status:n,disableClickTrigger:a=!1,style:{triggerStyle:r}}=g,o=(0,G.A)(g,Z),{onClick:s,onKeyDown:l,tabIndex:i,className:c}=e,d=(0,G.A)(e,J);return Object.assign({"aria-expanded":n===W.U.OPEN,tabIndex:void 0!==i?i:0,ref:g.handleRef,className:b()(r,c)},!a&&{onClick:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];"function"==typeof s&&s(...n),t.emit("toggle")},onKeyDown:function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];"function"==typeof l&&l(e,...a),(0,z.EE)(e,[q.Ks.Enter],[q.Mr.KeyDown])&&t.emit("toggle")}},o,d)}),l);var g;const E=r().Children.only(t);return r().isValidElement(E)?r().cloneElement(E,Object.assign({"aria-expanded":d===W.U.OPEN,tabIndex:void 0!==E.props.tabIndex?E.props.tabIndex:0,ref:p,className:b()(f,E.props.className)},s,!o&&((e,t)=>{const{bus:n}=e;return{onClick:(0,X.E)(t,"onClick",(()=>{n.emit("toggle")})),onKeyDown:(0,X.E)(t,"onKeyDown",(e=>{(0,z.EE)(e,[q.Ks.Enter],[q.Mr.KeyDown])&&n.emit("toggle")}))}})(Object.assign({},e,{bus:c}),E))):null},ee=n(21663);const te=["disableContentPreload"];var ne=e=>{const{disableContentPreload:t=!1}=e,o=(0,G.A)(e,te),[s,l]=(0,a.useState)((()=>()=>r().createElement(r().Fragment,null))),[i,c]=(0,Q.D)(j.Ay),d=(0,a.useRef)(),{status:u,bus:f}=i,m=()=>{f.off("open",m),c({status:W.U.OPEN}),Promise.all([n.e(29674),n.e(23649)]).then(n.bind(n,23649)).then((e=>{l((()=>e.default))}))},b=()=>{u===W.U.CLOSED&&m()};(0,a.useEffect)((()=>{u===W.U.OPEN&&(f.off("toggle",b),m())}),[]),(0,a.useEffect)((()=>(f.on("toggle",b),f.on("open",m),()=>{f.off("toggle",b),f.off("open",m)})),[b,m,f]);const p=e=>{e.timeRemaining()>=25||e.didTimeout?(f.off("toggle",b),f.off("open",m),Promise.all([n.e(29674),n.e(23649)]).then(n.bind(n,23649)).then((e=>{l((()=>e.default))}))):("number"==typeof d.current&&(0,ee.G)(d.current),d.current=(0,ee.B)(p))};return(0,a.useEffect)((()=>(t||(d.current=(0,ee.B)(p,{timeout:250})),()=>{t||"number"==typeof d.current&&(0,ee.G)(d.current)})),[]),r().createElement(s,o)};var ae=e=>{const{children:t,initialFocus:n,disable:o}=e,s=(0,a.useRef)(null),[l]=(0,Q.D)(j.Ay),[i,c]=r().useState(!1),d=(0,a.useRef)(),u=(0,a.useRef)(),f=t=>{const n=null==t?void 0:t.item(0),a=null==n?void 0:n.getAttribute("type");if("radio"===a||"checkbox"===a){const t=(null==n?void 0:n.getAttribute("name"))||"";return t&&!["dropdown","picker"].includes(e.focusTarget)?x(t):n}return n},m=t=>{const n=null==t?void 0:t.item(t.length-1),a=null==n?void 0:n.getAttribute("type");if("radio"===a||"checkbox"===a){const t=(null==n?void 0:n.getAttribute("name"))||"";return t&&!["dropdown","picker"].includes(e.focusTarget)?x(t):n}return n},b=e=>{const t=e;if("Tab"===t.key&&!t.shiftKey){t.preventDefault();const e=k(),a=f(e);if(a instanceof NodeList){var n;let e=a.item(0);a.forEach((t=>{const n=t;n.checked&&(e=n)})),null===(n=e)||void 0===n||n.focus()}else{const e=a;null==e||e.focus()}}},p=()=>{c(!0)},g=()=>{c(!1)},E=e=>{const t=e;if("Tab"===t.key&&t.shiftKey){e.preventDefault();const t=k(),n=null==t?void 0:t.item(t.length-1);null==n||n.focus()}},v=(t,n,a)=>{if(t instanceof NodeList)if(["dropdown","picker"].includes(e.focusTarget)){t.item(0).addEventListener(n,a)}else for(let e=0;e<t.length;e++){t.item(e).addEventListener(n,a)}else t instanceof HTMLElement&&t.addEventListener(n,a)},_=(e,t,n)=>{if(e instanceof NodeList)for(let a=0;a<e.length;a++){e[a].removeEventListener(t,n)}},y=(e,t,n)=>{if(e instanceof NodeList)for(let a=0;a<e.length;a++){e[a].removeEventListener(t,n)}else e instanceof HTMLElement&&e.removeEventListener(t,n)};(0,a.useEffect)((()=>{if(o||l.status===W.U.CLOSED)return;const e=k();(e=>{if(n)if("string"==typeof n){var t;const e=null===(t=s.current)||void 0===t?void 0:t.querySelector(n);null==e||e.focus()}else{var a;null===(a=n.current)||void 0===a||a.focus()}else if(e instanceof NodeList){const t=e.item(0);requestAnimationFrame((()=>{t.focus()}))}else e instanceof HTMLElement&&requestAnimationFrame((()=>{setTimeout((()=>{e.focus()}),0)}))})(f(e))}),[n,o,l.status]);const h=e=>{const t=k(),n=m(t);_(t,"focus",p),_(t,"blur",g),v(n,"focus",p),v(n,"blur",g),((e,t)=>{t instanceof HTMLElement&&e.observe(t,{attributes:!0,attributeFilter:["disabled"]})})(e,n),u.current=n},N=()=>{const e=k(),t=f(e),n=m(e);d.current&&y(d.current,"keydown",E),u.current&&y(u.current,"keydown",b),t instanceof HTMLInputElement&&n instanceof HTMLInputElement&&t.name===n.name&&"radio"===t.type?v(t,"keydown",b):(v(t,"keydown",E),v(n,"keydown",b)),d.current=t,u.current=n},w=new MutationObserver((e=>{for(const t of e)if("attributes"===t.type&&"disabled"===t.attributeName){if(t.target.disabled){const e=d.current;null==e||e.focus()}}}));(0,a.useEffect)((()=>{if(!o&&l.status!==W.U.CLOSED)return h(w),()=>{w.disconnect(),(()=>{const e=k();y(e,"focus",p),y(e,"blur",g)})()}}),[o,i,l.status]),(0,a.useEffect)((()=>{if(l.status===W.U.CLOSED)return;const e=new MutationObserver((e=>{if(l.status===W.U.CLOSED)return;e.map((e=>"attributes"===e.type&&"disabled"===e.attributeName||"childList"===e.type)).includes(!0)&&(N(),h(w))}));return s.current&&e.observe(s.current,{childList:!0,attributes:!0,subtree:!0}),N(),()=>{e.disconnect(),w.disconnect(),(()=>{const e=k(),t=f(e),n=m(e);y(t,"keydown",E),y(n,"keydown",b)})()}}),[l.status]);const k=()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.querySelectorAll("a, button:not([disabled]), input:not([disabled]):not([type='hidden']), select:not([disabled])")},x=e=>{var t;return null===(t=s.current)||void 0===t?void 0:t.querySelectorAll('input[name="'+e+'"]')};if(o)return r().createElement(r().Fragment,null,t);const L={tabIndex:-1,ref:s,role:"presentation"};return r().createElement("div",(0,H.A)({className:l.style.focusWrapper},L),t)};const re=["className","children","forwardedRef"];var oe=e=>{let{className:t,children:n,forwardedRef:a}=e,o=(0,G.A)(e,re);const[s]=(0,Q.D)(j.Ay),{style:{header:l}}=s;return"function"==typeof n?n((e=>(void 0===e&&(e={}),Object.assign({},e,{className:b()(l,e.className)}))),s):r().createElement("div",(0,H.A)({className:b()(l,t),ref:a},o),n)};const se=["children","className","forwardedRef"];var le=e=>{let{children:t,className:n,forwardedRef:a}=e,o=(0,G.A)(e,se);const[s]=(0,Q.D)(j.Ay),{style:{body:l}}=s;return"function"==typeof t?t((e=>(void 0===e&&(e={}),Object.assign({},e,{className:b()(l,e.className)}))),s):r().createElement("div",(0,H.A)({className:b()(l,n),ref:a},o),t)};const ie=["className","children","forwardedRef"];var ce=e=>{let{className:t,children:n,forwardedRef:a}=e,o=(0,G.A)(e,ie);const[s]=(0,Q.D)(j.Ay),{style:{footer:l}}=s;return"function"==typeof n?n((e=>(void 0===e&&(e={}),Object.assign({},e,{className:b()(l,e.className)}))),s):r().createElement("div",(0,H.A)({className:b()(l,t),ref:a},o),n)};const de=["id","trigger","header","children","footer","aria-label","ariaLabelledBy","ariaDescribedBy","flyoutTriggerProps","flyoutContentProps","flyoutHeaderProps","flyoutBodyProps","flyoutFooterProps","focusManagerProps"];var ue=e=>{let{id:t,trigger:n,header:a,children:o,footer:s,"aria-label":l,ariaLabelledBy:i,ariaDescribedBy:c,flyoutTriggerProps:d,flyoutContentProps:u,flyoutHeaderProps:f,flyoutBodyProps:m,flyoutFooterProps:b,focusManagerProps:p}=e,g=(0,G.A)(e,de);const E=r().useId(),v=t||E,_="dialog";return r().createElement(j.Ay,g,r().createElement($,(0,H.A)({"aria-haspopup":_,"aria-controls":v},d),n),r().createElement(ne,(0,H.A)({},u,{id:v,role:_,"aria-modal":!0,"aria-label":l,"aria-labelledby":i,"aria-describedby":c,lockBodyScroll:!0,withBackdrop:!0}),r().createElement(ae,(0,H.A)({initialFocus:null==u?void 0:u.initialFocusElement,focusTarget:"drawer"},p),a&&r().createElement(oe,f,a),r().createElement(le,m,o),s&&r().createElement(ce,b,s))))};var fe=(0,P.X)(K)(ue),me=n(14936),be=n(41825),pe=n(21267);const ge=e=>{let{tracking:t,board:n,selectedBoards:r,updateSelectedBoards:o}=e;var s;const l=null==(s=n.entities.nodes)?void 0:s.slice(0,3),i=n.entities.totalCount||0,c=l&&l.map((e=>{if("__typename"in e&&"Content"===e.__typename){var t,n;const o=e.variant;var a,r;if("productExtensions"in o&&(null==(n=o.productExtensions)||null==(t=n.gallery)?void 0:t.length))return null==(r=o.productExtensions.gallery[0])||null==(a=r.media)?void 0:a.uri}})).filter((e=>Boolean(e))),d=i>1?__("boards.saved.popup.item.plural",i):__("boards.saved.popup.item.singular",i);return a.createElement(a.Fragment,null,a.createElement("style",{dangerouslySetInnerHTML:{__html:'\n.round {\n  position: relative;\n}\n\n.round .tick {\n  background-color: #fff;\n  border: 2px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n  height: 28px;\n  width: 28px;\n  left: -15px;\n  position: absolute;\n  top: 0;\n}\n\n.round .tick:after {\n  border: 2px solid #fff;\n  border-top: none;\n  border-right: none;\n  content: "";\n  height: 6px;\n  left: 6px;\n  opacity: 0;\n  position: absolute;\n  top: 7px;\n  transform: rotate(-45deg);\n  width: 12px;\n}\n\n.round input[type="checkbox"] {\n  visibility: hidden;\n}\n\n.round input[type="checkbox"]:checked + .tick {\n  background-color: black;\n  border-color: black;\n}\n\n.round input[type="checkbox"]:checked + .tick:after {\n  opacity: 1;\n}\n'}}),a.createElement("div",{className:b()(v.OL,_.sS,_.Fn,E.LXt,E.vJI)},a.createElement("div",{className:b()(v.OL,_.Fn)},a.createElement("div",{className:b()(v.OL,E.B4c,_.sS,be.KD),style:{height:60,width:70,background:"rgba(239, 239, 240, 1)"}},a.createElement(pe.A,{className:b()(E.Cos,be.KD,me.Xv),style:{flex:2},src:c&&c[0],height:48,width:36}),a.createElement("div",{className:b()(v.OL,_.vF,me.Xv,_.HX),style:{gap:"0.20rem"}},a.createElement(pe.A,{className:b()(be.KD,_.HX),style:{height:"26px"},src:c&&c[1],width:28}),a.createElement(pe.A,{className:b()(be.KD,_.HX),src:c&&c[2],style:{height:"26px"},width:28}))),a.createElement("div",{className:b()(v.OL,_.vF,E.Ubi)},a.createElement(x.Ay,{color:L.r7.primary},n.name),a.createElement(x.Ay,{color:L.r7.secondary},d))),a.createElement("div",{className:"container",style:{marginBottom:"15px"}},a.createElement("div",{className:"round"},a.createElement("label",{id:"label-"+n.id,htmlFor:n.id},a.createElement("input",{type:"checkbox",checked:!!r[n.id],onChange:()=>{o({...r,[n.id]:!r[n.id]}),((e,t)=>{const n={name:"select_content",context:{component_name:"pdp_popup",event_trigger_name:"choose_board:"+t}};e.trackStandalone(n)})(t,n.id)},id:n.id,"aria-labelledby":"label-"+n.id}),a.createElement("span",{className:"tick"}))))))};var Ee=n(9049),ve=n(3906),_e=n(58777);const ye=new y.l,he=e=>{let{updateBoardsData:t,trackingTools:n}=e;var r,o;const s=(l=t.length,i=null==(r=t[0])?void 0:r.name,l>1?{message:__("boards.saved.success.message.plural"),ctaLabel:__("boards.saved.success.cta.plural")}:{message:__("boards.saved.success.message.singular",i),ctaLabel:__("boards.saved.success.cta.singular")});var l,i;const c=t.length>1?"/wardrobe/":"/your-boards/"+(null==(o=t[0])?void 0:o.id.split(":ucm:")[1]);f.h.show(a.createElement(I.z,{message:s.message,preset:"initial",action:{label:s.ctaLabel,onClick:()=>{window.location.href=c,n.trackStandalone({name:"select_content",context:{component_name:"pdp_popup",event_trigger_name:"view_board"}})}}}))},Ne=e=>{let{trackingTools:t,isMobile:n,closeDialog:r,userBoards:o,selectedBoards:s,setSelectedBoards:l}=e;return a.createElement("div",{className:b()(v.OL,_.vF)},n&&a.createElement("div",{className:b()(g.Gm,v.OL,_.Gs,E.XiK,E.Mw$)},a.createElement(ve.A,{"data-testid":"mobile-close-btn",preset:_e.lH.transparent,label:"Close",onClick:r},a.createElement(C.A,{src:Ee.A,style:{fill:"black"}}))),a.createElement("div",{className:b()({[E.ZLx]:n,[E.Mn7]:n})},a.createElement(x.Ay,{className:b()(E.uvl,E.Ubi,{[E.Ol8]:!n}),color:L.r7.primary,preset:L.nx.h2},__("boards.saved.popup.select")),a.createElement("div",{className:b()(E.ZIx,E.Mw$),style:{maxHeight:"250px",overflow:"scroll"}},o.map((e=>a.createElement(ge,{tracking:t,key:e.id,board:e,selectedBoards:s,updateSelectedBoards:l}))))))},we=e=>{let{isMobile:t,createNewBoardCTA:n,addToBoardBtnDisabled:r,primaryCtaClicked:o,boardIsSaving:s}=e;return a.createElement("div",{className:b()(v.OL,g.Gm,E.IuV,{[_.Gs]:!t,[_.vF]:t,[E.g5R]:t}),style:{background:"white",gap:"15px",paddingLeft:"25px",paddingRight:"25px"}},a.createElement(h.t,{type:"button",onClick:n,label:__("boards.saved.popup.create"),style:{width:t?"100%":""}}),a.createElement(N.j,{type:"button",onClick:o,label:__("boards.saved.popup.done"),style:{width:t?"100%":120},disabled:r,state:s?w.w.LOADING:w.w.INITIAL}))},ke=e=>{let{sku:t,tools:n,showDialog:r,isMobile:o,userBoards:s,setShowSelectDialog:l,createNewBoardCTA:i,refreshUserBoards:c}=e;const[d,u]=a.useState({}),[m,b]=a.useState({}),[g,E]=a.useState(!0),[v,_]=a.useState(!1),y=n.tracking;a.useEffect((()=>{r?ye.emit("open"):h()}),[r]),a.useEffect((()=>{const e={};s.forEach((n=>{if(n.id){e[n.id]=!1;const a=(e=>{let{sku:t,board:n}=e;if(!n)return null;const a=n.entities.nodes;return null==a?void 0:a.some((e=>{if("__typename"in e){const n=e.variant;if("sku"in n)return n.sku===t}}))})({sku:t,board:n});a&&(e[n.id]=!0)}})),u(e),b(e)}),[s]);const h=()=>{ye.emit("close"),u({}),l(!1)};a.useEffect((()=>{const e=Object.values(d).some((e=>Boolean(e)));E(!e)}),[d]);const N=async e=>{const a=(e=>{const n="ern:content::basic-product:"+t;return Object.entries(e).reduce(((e,t)=>{var a;const r=t[0],o=t[1],l=(e=>{let{boardId:t,userBoards:n}=e;var a;const r=n.find((e=>e.id===t));return(null==r||null==(a=r.entities.nodes)?void 0:a.filter((e=>"__typename"in e&&"Content"===e.__typename)).map((e=>"id"in e?e.id:"")))||[]})({boardId:r,userBoards:s}),i=(null==(a=s.find((e=>e.id===r)))?void 0:a.name)||"";let c;if(o&&!0!==m[r]?c=[n,...l]:o||!1===m[r]||(c=l.filter((e=>e!==n))),c){const t={id:r,name:i,entities:c};e.push(t)}return e}),[])})(e);if(_(!0),!a)return;const r=a.map((e=>(0,p.A)({tools:n,id:e.id,name:e.name,entities:e.entities})),((e,t)=>{const n={name:"select_content",context:{component_name:"pdp_popup",event_trigger_name:"add_to_board:"+t}};e.trackStandalone(n)})(y,t));(await Promise.allSettled(r)).every((e=>"fulfilled"===e.status))?he({updateBoardsData:a,trackingTools:y}):f.h.show(F(__("boards.edit.error"))),c(),_(!1),l(!1)};return a.createElement(a.Fragment,null,o?a.createElement(fe,{"data-testid":"select_board_popup_mobile","aria-label":"Drawer",bus:ye,trigger:()=>a.createElement(a.Fragment,null),footer:a.createElement(we,{isMobile:o,createNewBoardCTA:i,addToBoardBtnDisabled:g||v,primaryCtaClicked:()=>N(d),boardIsSaving:v})},a.createElement(Ne,{trackingTools:y,isMobile:o,closeDialog:h,userBoards:s,selectedBoards:d,setSelectedBoards:u})):a.createElement(V.A,{style:{width:"300px !important"},"data-testid":"select_board_popup_web",bus:ye,onClose:h,footer:a.createElement(we,{isMobile:o,createNewBoardCTA:i,addToBoardBtnDisabled:g||v,primaryCtaClicked:()=>N(d),boardIsSaving:v})},a.createElement(Ne,{trackingTools:y,isMobile:o,closeDialog:h,userBoards:s,selectedBoards:d,setSelectedBoards:u})))};var xe=(0,l.tile)().withRender((e=>{let{tools:t,context:n,ruleData:r}=e;const s=t.tracking,l=n.deviceInfo.isMobile,m=r.isUserBoardCreationEnabled,[b,p]=a.useState(""),[g,E]=a.useState([]),[v,_]=a.useState(!1),[y,h]=a.useState(null),[N,w]=a.useState(!1),[k,x]=a.useState(!1);a.useEffect((()=>(o.on(i.b4,(e=>{let{sku:t}=e;m&&(p(t),f.h.show(a.createElement(I.z,{message:""+__("boards.saved.success","favourites"),preset:"initial",action:{label:__("boards.saved.add.cta"),onClick:async()=>{const e=await L();(null==e?void 0:e.length)?w(!0):x(!0),u(s,t)}}})))})),()=>{o.off(i.b4)})),[]),a.useEffect((()=>{const e=async e=>{let{sku:t}=e;if(m){p(t);const e=await L();(null==e?void 0:e.length)?w(!0):x(!0),u(s,t)}};return o.on(i.Ds,e),()=>{o.off(i.Ds,e)}}),[]),a.useEffect((()=>{const e=async e=>{let{boardId:t}=e;x(!0),await A(t),_(!0)};return o.on(i.L7,e),()=>{o.off(i.L7,e)}}),[]);const L=async()=>{const e=await t.executeQuery({...c,variables:{}},{fetchPolicy:"network-only"});if(e.data){var n;const t=null==(n=e.data.userBoards)?void 0:n.boards;if(null==t?void 0:t.length){const e=t.reduce(((e,t)=>(t&&e.push(t),e)),[]);return E(e),e}}},A=async e=>{const n={id:e},a=await t.executeQuery({...d,variables:n});if(a.data){const e=a.data.board;e&&h(e)}};return a.createElement(a.Fragment,null,a.createElement(ke,{tools:t,sku:b,isMobile:l,showDialog:N,userBoards:g,setShowSelectDialog:e=>w(e),createNewBoardCTA:()=>{w(!1),x(!0),s.trackStandalone({name:"select_content",context:{component_name:"pdp_popup",event_trigger_name:"create_board"}})},refreshUserBoards:()=>L()}),a.createElement(U,{tools:t,isEditMode:v,initialSku:b,board:y,isMobile:l,showDialog:k,setShowBoardNameDialog:e=>x(e)}))}))},12280:function(e,t,n){"use strict";var a=n(59890),r=n(34801),o=n(85959),s=n.n(o),l=n(4906);const i={style:{},status:l.U.CLOSED,value:null},c=(0,r.e)((e=>Object.assign({},i,{bus:new a.l},void 0!==(null==e?void 0:e.defaultValue)?{value:null==e?void 0:e.defaultValue}:{})),(e=>{const{styles:t={},bus:n,closeToSwipeDirection:a,preventFocusTransfer:r}=e;return Object.assign({style:t,closeToSwipeDirection:a,preventFocusTransfer:r},void 0!==n?{bus:n}:{})}))((e=>{const{defaultValue:t,initialStatus:n,context:{bus:a,setContext:r,value:i},children:c,onOpen:d,onChange:u,onClose:f,onBlur:m,onSubmit:b}=e;(0,o.useEffect)((()=>{void 0===n&&void 0===t||r(Object.assign({},void 0!==t?{value:t}:{},void 0!==n?{status:n}:{})),n===l.U.OPEN&&setTimeout((()=>{a.emit("open",{dontTrack:!0})}),0)}),[t,a]);const p=(0,o.useCallback)((e=>{"function"==typeof u&&u(e),r({value:e})}),[u]),g=(0,o.useCallback)((()=>{"function"==typeof m&&m(i)}),[i,m]),E=(0,o.useCallback)((e=>{"function"==typeof b&&b(e),r({value:e})}),[b]),v=(0,o.useCallback)((e=>{let{status:t,dontTrack:n}=e;t===l.U.OPEN?n||"function"!=typeof d||d(i):t!==l.U.CLOSED||n||"function"!=typeof f||f(i)}),[i,d,f]);return(0,o.useEffect)((()=>(a.on("change",p),()=>{a.off("change",p)})),[a,p]),(0,o.useEffect)((()=>(a.on("blur",g),()=>{a.off("blur",g)})),[a,g]),(0,o.useEffect)((()=>(a.on("submit",E),()=>{a.off("submit",E)})),[a,E]),(0,o.useEffect)((()=>(a.on("toggle:success",v),()=>{a.off("toggle:success",v)})),[a,v]),s().createElement(s().Fragment,null,c)}));c.displayName="Flyout",t.Ay=c},4906:function(e,t,n){"use strict";let a;n.d(t,{U:function(){return a}}),function(e){e.OPEN="open",e.CLOSED="closed"}(a||(a={}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},48398:function(e){"use strict";e.exports=n},32740:function(e){"use strict";e.exports=a},21775:function(e){"use strict";e.exports=r}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(10870),t(19569)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/collection_board-creation-modal/index-aa20c067e0098f2facdd.map