define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,i){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[49049],{2711:function(e){e.exports={id:"4d29018c05d619fd6103b2da3bff9aef414de0e6dc91839cd7a6b02f9bbf18a4"}},90425:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});const i={dateFormatOptions:{day:"numeric",month:"long",year:"numeric"},dateTimeDivider:" @ ",timeFormatOptions:{hour:"numeric",minute:"numeric",hour12:!1}},r={...i,dateTimeDivider:" um "},l={...i,dateTimeDivider:" alle "},o={"de-DE":r,"it-IT":l,"it-CH":l};var a;const s=(e,t,n)=>{const r=(e=>null!=(a=o[e])?a:i)(t);var l;const s=null!=(l=null==n?void 0:n.dateFormatOptions)?l:r.dateFormatOptions;var d;const c=null!=(d=null==n?void 0:n.timeFormatOptions)?d:r.timeFormatOptions;var u;const m=null!=(u=null==n?void 0:n.dateTimeDivider)?u:null==r?void 0:r.dateTimeDivider,y=new Date(e);return{date:y.toLocaleString(t,s),time:y.toLocaleString(t,c),dateTimeDivider:m}}},34538:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n(85959),r=n(29443),l=n(32740),o=n(11506),a=n(30812),s=n.n(a),d=n(21775),c=n(45728),u=n(3090),m=n(90425),y=n(29817),g=n(52130),_=n(2673),p=n(25277),v=n(10170),f=n(5073),E=n(22837),N=n(15184),h=n(41825),P=n(51599),x=n(75839);const D="PRIORITY_ACCESS_INVITE_NUDGE",S="OUT_OF_STOCK_BENEFIT_NUDGE",b="CROSS_PROPOSITION_MISSION_NUDGE",I="DELIVERY_BENEFIT_SIGN_UP_NUDGE";var O=e=>{let{loyaltyNudge:t,loyaltyPointsProgram:n,isDesignerExperience:r,locale:o,isInverted:a,tracking:O}=e;var T,k;const w=(e=>{let{kind:t,hasCTA:n}=e,i="";return t===I&&(i="loyalty_opt_in_placement"),t===S&&(i="priority_size_reminder|||config_level|||"+(n?"with_loyalty_opt_in":"without_loyalty_opt_in")),t===D&&(i="priority_size_reminder|||config_level|||"+(n?"with_loyalty_opt_in":"without_loyalty_opt_in")),{name:"view_content",context:{event_trigger_name:i}}})({kind:t.kind,hasCTA:Boolean(t.cta)}),C=(e=>{let{loyaltyNudge:t,isInverted:n,isDesignerExperience:i}=e,r=E.z.default,l=[h.$A,h.Nd,h.e6,h.FQ,h.NB,P.sS9],o=P.GUV,a=g.nx.bodySmallBold;return n&&(r=E.z.monochromeDark),(null==t?void 0:t.kind)===b&&(r=E.z.default,o=P.JSK,l=[],a=g.nx.bodyLargeBold),i&&(r=E.z.monochromeLight),{colorScheme:r,bgClasses:[o],borderClasses:l,textPreset:{title:a}}})({loyaltyNudge:t,isInverted:a,isDesignerExperience:r});return i.createElement(l.ViewTracker,{enableStandaloneOnly:!0,standaloneEvents:w?[w]:void 0},i.createElement(N.Sv,{colorScheme:C.colorScheme},i.createElement("div",{"data-testid":"product-loyalty-points-nudge",className:s()(...C.bgClasses,...C.borderClasses,...!r&&a?[x.nME,x.vAn,x.$4c,v.Gmw,v.zFk]:[])},i.createElement("div",{className:s()(v.cgu)},i.createElement(y.A,{logo:null==t||null==(T=t.header)?void 0:T.asset,size:"s",logoLabel:null==n||null==(k=n.tier)?void 0:k.name,icon:null==n?void 0:n.icon}),t.title?i.createElement(_.Ay,{tag:"p",preset:C.textPreset.title,className:v.aUF},t.title):null,t.description?i.createElement(_.Ay,{tag:"p",preset:g.nx.bodySmall,className:v.E0r},t.description):null,((e,t)=>{if(!e)return null;const{date:n,time:r,dateTimeDivider:l}=(0,m.r)(e,t);return i.createElement(_.Ay,{tag:"p",preset:g.nx.bodySmallBold},n,l,r)})(t.date,o),t.cta?i.createElement("div",{className:s()(v.aUF,f.OL)},i.createElement(p.Q,{size:"medium",label:t.cta.label,onClick:()=>{((e,t)=>{let n="";t===I&&(n="loyalty_opt_in_placement"),t===S&&(n="priority_size_reminder|||config_level|||with_loyalty_opt_in"),t===D&&(n="priority_size_reminder|||config_level|||with_loyalty_opt_in"),e.trackStandalone({name:"select_content",context:{event_trigger_name:n}})})(O,t.kind),d.trigger(u.x.OPEN,{context:c.o.PDP})}})):null))))},T=n(2711),k=(0,l.tile)().withQueries((e=>({data:{query:T,variables:{id:e.entity.id}}}))).withTracking((e=>({def:r.def,context:{id:e.entity.id}}))).withProcessDependencies(((e,t)=>{let{data:n}=e,{entity:i}=t;var r,l,o,a;if(!n)return{action:"error",message:"Invalid data"};const{product:s,loyaltyPointsProgram:d}=n;if(!s)return{action:"error",message:"Invalid product"};const[,c,u]=i.hints,m=(null==s||null==(o=s.simples)||null==(l=o.find((e=>e.sku===u)))||null==(r=l.offer.loyaltyPointsProgram)?void 0:r.nudge)||(null==s||null==(a=s.loyaltyPointsProgram)?void 0:a.nudge);var y;return c&&!c.includes(null!=(y=null==m?void 0:m.kind)?y:"")?{action:"error",message:"Invalid useCase"}:m?{action:"render",data:{loyaltyNudge:m,loyaltyPointsProgram:d}}:{action:"error",message:"No loyalty nudge data"}})).withRender((e=>{let{data:{loyaltyPointsProgram:t,loyaltyNudge:n},context:{locale:r,experience:l},tools:a}=e;const{experienceName:s}=(0,o.q)(l);return i.createElement(O,{loyaltyNudge:n,loyaltyPointsProgram:t,tracking:a.tracking,locale:r,isDesignerExperience:null==s?void 0:s.isDesigner(),isInverted:!0})}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=i}},function(e){return e.O(0,[29674],(function(){return t=34538,e(e.s=t);var t})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/product_loyalty-nudge/index-5f483b8c351f3caf73a5.map