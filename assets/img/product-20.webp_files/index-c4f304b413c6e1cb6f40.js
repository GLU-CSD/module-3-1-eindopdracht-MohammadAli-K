define(["classnames","react","react-dom","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,i,o){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[47868],{95478:function(e){e.exports={id:"5638c76143657c4e153410d9924a911ab6eb00481200db3a91f015842b2e16ad"}},47496:function(e){e.exports={id:"373f925d6399ec77c4f31fbc6a747d4f45c22f76448781565378915ff00e7464"}},35394:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"entity_plus-exclusivity-notifications":["product.flag.earlyaccess.plus","product.flag.priorityaccess.loyalty_points","pdp.plus.earlyaccess.reminder.confirmation.headline","pdp.plus.earlyaccess.reminder.confirmation.subheadline","pdp.plus.earlyaccess.reminder.confirmation.body","pdp.plus.earlyaccess.reminder.confirmation.body.wishlist","pdp.plus.earlyaccess.reminder.error","max.order.limit.notification.pdp","max.customer.limit.notification.pdp","max.customer.limit.notification.wardrobe.web","loyalty_points.missions.success.pointscollected"]}},88827:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ie}});var i=n(32740),o=n(85959),r=n(47496),a=n(95478),c=n(52292),s=n(21775),l=n(28258),E=n(30812),u=n.n(E),d=n(51599),R=n(5073),m=n(38856),S=n(15184),_=n(22837),A=n(87548),C=n(36124),y=n(3906),p=n(10170),T=n(32099),L=n(22940),I=n(71016),f=n(9049),P=(0,o.createContext)({});var D=e=>{let{children:t,onClose:n,onLoad:i,label:r}=e;o.useEffect((()=>{i&&i()}),[]);const{loyaltyPointsProgram:a}=o.useContext(P);let c;var s;var l;["ACTIVE","ELIGIBLE"].includes(null!=(s=null==a?void 0:a.loyaltyStatus)?s:"")?c=(null==a||null==(l=a.tier)?void 0:l.name)?o.createElement(I.A,{logo:"LoyaltyPointsTile",label:r,logoLabel:a.tier.name,size:"m",icon:null==a?void 0:a.icon}):o.createElement(I.A,{logo:"LoyaltyPoints",label:r,size:"m"}):c=o.createElement(I.A,{logo:"Plus",label:r,size:"m"});return o.createElement("div",{className:u()(A._Su,A.x6V,A.l5b,L.CY,R.OL,T.Gm)},o.createElement("div",{className:u()(d.GUV,m.Vp,m.zb,p.QDS,p.goz),style:{maxWidth:460,maxHeight:233}},o.createElement("div",{className:A.cky},n&&o.createElement(y.A,{className:u()(A.DYq,A.Er7,A.d7k),style:{cursor:"pointer"},onClick:n},o.createElement(C.A,{src:f.A})),o.createElement("div",{className:u()(R.OL,m.Fn,p.uvl,(0,S.dl)(_.z.monochromeLight))},c),t)))};var N,v,O,U={earlyAccessText:()=>__("product.flag.earlyaccess.plus"),loyaltyPointsPriorityAccessText:()=>__("product.flag.priorityaccess.loyalty_points"),earlyAccessReminderSuccessHeadline:()=>__("pdp.plus.earlyaccess.reminder.confirmation.headline"),earlyAccessReminderSuccessSubheadline:()=>__("pdp.plus.earlyaccess.reminder.confirmation.subheadline"),earlyAccessReminderSuccessBody:()=>__("pdp.plus.earlyaccess.reminder.confirmation.body"),earlyAccessReminderAndLikeSuccessBody:()=>__("pdp.plus.earlyaccess.reminder.confirmation.body.wishlist"),earlyAccessReminderErrorText:()=>__("pdp.plus.earlyaccess.reminder.error"),purchaseRestrictionOnLoadText:()=>__("max.order.limit.notification.pdp"),purchaseRestrictionInPageText:()=>__("max.customer.limit.notification.pdp"),purchaseRestrictionWardrobeText:()=>__("max.customer.limit.notification.wardrobe.web")};!function(e){e.EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS="EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS",e.EARLY_ACCESS_REMINDER_SUCCESS="EARLY_ACCESS_REMINDER_SUCCESS",e.EARLY_ACCESS_REMINDER_ERROR="EARLY_ACCESS_REMINDER_ERROR",e.PURCHASE_RESTRICTION="PURCHASE_RESTRICTION",e.PURCHASE_LIMIT_REACHED="PURCHASE_LIMIT_REACHED",e.PURCHASE_LIMIT_REACHED_WARDROBE="PURCHASE_LIMIT_REACHED_WARDROBE",e.LOYALTY_MISSION_COMPLETED="LOYALTY_MISSION_COMPLETED"}(N||(N={})),function(e){e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM"}(v||(v={})),function(e){e.PDP="PDP",e.WARDROBE="WARDROBE"}(O||(O={}));var h=e=>{let{notifications:{defaultNotifications:t=[],customNotification:n},tracking:i,onClose:r,notificationPayload:a}=e;const[c,s]=o.useState(!1),{loyaltyPointsProgram:E}=o.useContext(P);var u;const d=["ACTIVE","ELIGIBLE"].includes(null!=(u=null==E?void 0:E.loyaltyStatus)?u:"");return o.useEffect((()=>{s(!0)}),[]),t.forEach((e=>{let{component:t,eventTracker:n}=e;(e=>{let{notificationPayload:t,component:n,eventTracker:i,tracking:o,isClientReady:r}=e;r&&(l.h.show(n(t)),o&&i&&i(o))})({notificationPayload:a,component:t,eventTracker:n,tracking:c?i:null,isClientReady:c})})),n?o.createElement(D,{label:d?U.loyaltyPointsPriorityAccessText():U.earlyAccessText(),onLoad:()=>n.eventTracker&&n.eventTracker(i),onClose:()=>r(v.CUSTOM)},n.component(a)):null};var M=n(2673),b=n(52130);var k=()=>o.createElement("div",{className:u()(R.OL,m.vF,p.g5R)},o.createElement(M.Ay,{color:b.r7.primary,preset:b.nx.bodyBold},U.earlyAccessReminderSuccessHeadline()),o.createElement(M.Ay,{color:b.r7.primary,preset:b.nx.body},U.earlyAccessReminderSuccessSubheadline()));var x=()=>o.createElement(o.Fragment,null,o.createElement(k,null),o.createElement("div",null,o.createElement(M.Ay,{color:b.r7.primary,preset:b.nx.body},U.earlyAccessReminderSuccessBody(),o.createElement("span",null," "),U.earlyAccessReminderAndLikeSuccessBody()))),g=n(91936);var H=()=>o.createElement(g.E,{timeout:5e3,clickToHide:!1,action:{shouldHideOnClick:!1},preset:"error"},o.createElement(M.Ay,{color:b.r7.inverse,preset:b.nx.body},U.earlyAccessReminderErrorText()));var Y=()=>o.createElement(o.Fragment,null,o.createElement(k,null),o.createElement("div",null,o.createElement(M.Ay,{color:b.r7.primary,preset:b.nx.body},U.earlyAccessReminderSuccessBody())));const w=e=>{void 0===e&&(e=O.PDP);const{purchaseRestrictionInPageText:t,purchaseRestrictionWardrobeText:n}=U;return()=>o.createElement(g.E,{timeout:5e3,clickToHide:!1,action:{shouldHideOnClick:!1}},o.createElement(M.Ay,{color:b.r7.inverse,preset:b.nx.body},e==O.PDP?t():n()))},B=w(O.PDP),W=w(O.WARDROBE);var F=()=>o.createElement(g.E,{clickToHide:!1,action:{shouldHideOnClick:!1}},o.createElement(M.Ay,{color:b.r7.inverse,preset:b.nx.body},U.purchaseRestrictionOnLoadText())),z=n(29817);var V,G,Q=e=>{let{amount:t}=e;return o.createElement(g.E,{timeout:5e3,clickToHide:!1,action:{shouldHideOnClick:!1}},o.createElement(S.Sv,{colorScheme:_.z.monochromeDark,className:u()(R.OL,m.Fn)},o.createElement(z.A,{logo:"LoyaltyPointsShort",size:"s"}),o.createElement(M.Ay,{preset:b.nx.bodySmall,className:p.uB3},t+" "+__("loyalty_points.missions.success.pointscollected"))))};!function(e){e.PLUS_EARLY_ACCESS="early_access",e.PURCHASE_RESTRICTED="product availability restriction",e.PURCHASE_RESTRICTED_CART="cart",e.PURCHASE_RESTRICTED_LIMIT_REACHED="bought"}(V||(V={})),function(e){e.PDP="product detail page",e.ZET="zet",e.WARDROBE="wardrobe"}(G||(G={}));var K=n(89862);const $=e=>{e.track({name:K.wc,context:{customCategory:G.ZET,customLabel:"plus reminder set | "+V.PLUS_EARLY_ACCESS}})},q={[N.EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS]:{component:x,eventTracker:$,kind:v.CUSTOM},[N.EARLY_ACCESS_REMINDER_SUCCESS]:{component:Y,eventTracker:$,kind:v.CUSTOM},[N.EARLY_ACCESS_REMINDER_ERROR]:{component:H,kind:v.DEFAULT},[N.PURCHASE_RESTRICTION]:{component:F,eventTracker:e=>{e.track({name:K.n6,context:{customCategory:G.PDP,customLabel:V.PURCHASE_RESTRICTED+" "+V.PURCHASE_RESTRICTED_CART}})},kind:v.DEFAULT},[N.PURCHASE_LIMIT_REACHED]:{component:B,eventTracker:e=>{e.track({name:K.n6,context:{customCategory:G.PDP,customLabel:V.PURCHASE_RESTRICTED+" "+V.PURCHASE_RESTRICTED_LIMIT_REACHED}})},kind:v.DEFAULT},[N.PURCHASE_LIMIT_REACHED_WARDROBE]:{component:W,eventTracker:e=>{e.track({name:K.wc,context:{customCategory:G.WARDROBE,customLabel:"liked items.add to cart.notification."+V.PURCHASE_RESTRICTED}})},kind:v.DEFAULT},[N.LOYALTY_MISSION_COMPLETED]:{component:e=>{let{amount:t}=e;return Q({amount:t})},kind:v.DEFAULT}},J=e=>{let{earlyAccessReminderNotification:t,isInitialPageLoad:n,isMobile:i,isPurchaseQuantityRestricted:o,isPurchaseQuantityLimitReached:r,loyaltyMissionNotification:a}=e;const c=[];return o&&n&&c.push(N.PURCHASE_RESTRICTION),i&&r&&c.push(N.PURCHASE_LIMIT_REACHED),t&&c.push(t),a&&c.push(a),(e=>e.reduce(((e,t)=>{let{defaultNotifications:n,customNotification:i}=e;const o=q[t];return{customNotification:o.kind===v.CUSTOM?o:i,defaultNotifications:o.kind===v.DEFAULT?[...n,o]:n}}),{customNotification:null,defaultNotifications:[]}))(c)},Z=e=>0===e,j=(e,t)=>null!==e&&e>0&&t>=e,X=(e,t)=>{let{isMobile:n,purchaseQuantityLimit:i,tracking:o}=e,{earlyAccessReminderNotification:r,loyaltyMissionNotification:a,isInitialPageLoad:c,numPurchases:s}=t;return{notifications:J({earlyAccessReminderNotification:r,loyaltyMissionNotification:a,isInitialPageLoad:c,isMobile:n,isPurchaseQuantityRestricted:Z(i),isPurchaseQuantityLimitReached:j(i,s)}),tracking:o}};var ee=()=>{const e=o.useContext(P),[t,n]=o.useState(!0),[i,r]=o.useState(0),[a,c]=o.useState(),[l,E]=o.useState(),[u,d]=o.useState(),R=()=>{c(N.EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS)},m=()=>{c(N.EARLY_ACCESS_REMINDER_SUCCESS)},S=()=>{c(N.EARLY_ACCESS_REMINDER_ERROR)},_=e=>{E(N.LOYALTY_MISSION_COMPLETED),d(e)};o.useEffect((()=>{n(!1),s.on("PDP$ADD_TO_CART_SUCCESS",(()=>{r((e=>e+1))})),s.on("WARDROBE$PURCHASE_LIMIT_REACHED",(()=>{c(N.PURCHASE_LIMIT_REACHED_WARDROBE)})),s.on("PLUS$EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESS_EVENT",R),s.on("PLUS$EARLY_ACCESS_REMINDER_SUCCESS_EVENT",m),s.on("PLUS$EARLY_ACCESS_REMINDER_ERROR_EVENT",S),s.on("PLUS$LOYALTY_MISSION_COMPLETED_SUCCESS_EVENT",_)}),[]);return o.createElement(h,{...X(e,{earlyAccessReminderNotification:a,loyaltyMissionNotification:l,isInitialPageLoad:t,numPurchases:i}),notificationPayload:{amount:u},onClose:e=>{e===v.CUSTOM&&c(void 0)}})};const te=e=>({id:e.entity.id}),ne=(0,c.C)((e=>e.children));var ie=(0,i.tile)().withQueries((e=>{var t;return(null==e||null==(t=e.ruleData)?void 0:t.showProductInfo)?{data:{query:a,variables:te(e)}}:{data:{query:r}}})).withTracking((e=>({resolve:()=>({context:te(e)})}))).withProcessDependencies((e=>({action:"render",data:e.data}))).withRender((e=>{var t,n;const{data:r,context:{deviceInfo:a},tools:{tracking:c}}=e;var s;const l={isMobile:a.isMobile,purchaseQuantityLimit:null!=(s=null==r||null==(n=r.product)||null==(t=n.purchaseRestriction)?void 0:t.quantityLimit)?s:null,tracking:c,loyaltyPointsProgram:r.loyaltyPointsProgram};return o.createElement(P.Provider,{value:l},o.createElement(ne,{disableListeners:!0,serverMedia:a,isTouchOnServer:!a.isDesktop},o.createElement(i.ViewTracker,null,o.createElement(ee,null))))}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},48398:function(e){"use strict";e.exports=n},32740:function(e){"use strict";e.exports=i},21775:function(e){"use strict";e.exports=o}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(35394),t(88827)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/entity_plus-exclusivity-notifications/index-811ad42eb33fa0b4bbdc.map