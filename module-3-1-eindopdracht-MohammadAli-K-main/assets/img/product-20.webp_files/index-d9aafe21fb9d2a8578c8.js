define(["classnames","react","rendering-engine-api"],(function(e,t,n){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[19724],{32425:function(e){e.exports={id:"e212661f89cca475554ee874d07196e8e716ecd842ec9a620a204ed05567756e"}},64631:function(e){e.exports={id:"adc5fae516e6e40c0c15ab0d2f5a5e3f016968870b83c2bb5d3418bdc614a27c"}},27801:function(e){e.exports={id:"711ef86002306d2e2c3fc2d806e86fc499aa026682575ca53a9d465afbe5f823"}},65470:function(e){e.exports={id:"2656033ac133cf1cf1a63c5f0e0572dfaaaa407c382fd04fe90576742173e308"}},4048:function(e){e.exports={id:"4379ab0ce6585117cae2ffa20a295ea994be9ad15c515519fa933948701ac32f"}},50068:function(e){e.exports={id:"fc2bc4b21f112658dd5cfe8b9c8768a0c3619b80d0d4695599a444b734e36f93"}},69218:function(e){e.exports={id:"1e64b010bf06d143966c3d1b697d7cc44599e25f0ab6a431e8ad5380d8b44b19"}},35525:function(e){e.exports={id:"06fe5b50b4218612aa3fa8494df326aef7ff35a75a8563b3455bb53c15168872"}},89581:function(e,t,n){"use strict";var r=n(85959);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}t.A=function(e){var t=e.title,n=e.titleId,a=o(e,["title","titleId"]);return r.createElement("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor","aria-labelledby":n},a),t?r.createElement("title",{id:n},t):null,r.createElement("path",{d:"M21 3H3a3.004 3.004 0 0 0-3 3v12a3.004 3.004 0 0 0 3 3h18a3.004 3.004 0 0 0 3-3V6a3.004 3.004 0 0 0-3-3m0 1.5c.318 0 .597.122.84.291l-8.816 8.229a1.505 1.505 0 0 1-2.048 0L2.16 4.79c.243-.17.522-.29.84-.291zm0 15H3A1.5 1.5 0 0 1 1.5 18V6.225l8.454 7.89A3 3 0 0 0 12 14.92a3 3 0 0 0 2.046-.804l8.454-7.89V18a1.5 1.5 0 0 1-1.5 1.5"}))}},66290:function(e,t,n){"use strict";n.d(t,{n:function(){return W}});var r={};n.r(r),n.d(r,{buttonSpacing:function(){return S},prefixIcon:function(){return k},prefixIconLarge:function(){return I},root:function(){return N},suffixIcon:function(){return h},text:function(){return A}});var s={};n.r(s),n.d(s,{i0:function(){return C},rf:function(){return L},bm:function(){return O},rn:function(){return T},zr:function(){return x}});var o=n(89575),a=n(17502),i=n(4955),c=n(15842),l=n(36124),u=n(52130),m=n(2673),d=n(30812),b=n.n(d),p=n(85959),f=n.n(p),E=n(67270),y=n(43168),_=n(41553),v=n(62030),g=n(21663),w=n(5828),N="SX0LGY vfoVrE DJxzzA u9KIT8 uEg2FS U_OhzR ZkIJC- Vn-7c- VWL_Ot _13ipK_ FCIprz heWLCX Wu1CzW Md_Vex NN8L-8 _d3F40 P3OKTW mo6ZnF K82if3 VWL_Ot HlZ_Tf _13ipK_ LyRfpJ",S="Z1Xqqm _8xiD-i sKmkSN pMa0tB",A="JCuRr_",h="_4GmiZN nXkCf3",k="iXbgaG nXkCf3 DlJ4rT _9l1hln _65i7kZ",I="QfLC_c",x="QsQR-j NN8L-8 JT3_zV _8sTSoF",L="Z1Xqqm sb1S7G sKmkSN pMa0tB",C="ZkIJC- i8_8W0",O="heWLCX",T="_0xLoFW _78xIQ- P3OKTW",R=n(47351);const M=["title","titlePreset","subTitle","open","prefix","children","tabIndex","ariaLabel","titleTag","onChange","className","bus","mountOnFirstExpand"],D={timeout:100},B=(0,y.X)(r)(w.A),W=e=>{const{i0:t,rf:n,bm:r,rn:d,zr:y}=s,{title:w,titlePreset:N="bodyBold",subTitle:S,open:A=!1,prefix:h,children:k,tabIndex:I=0,ariaLabel:x,titleTag:L=u.Wh.h3,onChange:C,className:O,bus:T,mountOnFirstExpand:W=!1}=e,P=(0,a.A)(e,M),[V,z]=(0,_.e)(A),[U,F]=(0,_.e)(!W||A),K=(0,p.useRef)(),G=(0,p.useRef)(!0),j=f().useCallback((()=>{F(!0),z(!0),"function"==typeof C&&C(!0)}),[C,z]),Q=f().useCallback((()=>{z(!1),"function"==typeof C&&C(!1)}),[C,z]),X=f().useCallback((()=>{V||F(!0),z(!V),"function"==typeof C&&C(!V)}),[C,V,z]);f().useEffect((()=>{if(T)return T.on("toggle",X),T.on("open",j),T.on("close",Q),()=>{T.off("toggle",X),T.off("open",j),T.off("close",Q)}}),[T,j,Q,X]);const[q,H]=(0,p.useState)(0),J=()=>{null!=K&&K.current&&H(K.current.scrollHeight)},[Z]=(0,v.A)((()=>(0,g.B)(J,D)),100);(0,p.useEffect)((()=>{if(U)return null!=K&&K.current&&(0,g.B)(J),(0,E.q)(Z),()=>(0,E.O)(Z)}),[K,U,V]),(0,p.useEffect)((()=>{V&&!G.current&&(0,g.B)(J)}),[k]);const Y=f().createElement(l.A,{src:V?i.A:c.A}),$=f().createElement("span",{className:d},f().createElement(m.Ay,{tag:"span",preset:u.nx[N],color:u.r7.inherit},w),S&&f().createElement(m.Ay,{tag:"span",preset:u.nx.body,color:u.r7.inherit},S));return(0,p.useEffect)((()=>{G.current&&(G.current=!1)}),[]),f().createElement("div",(0,o.A)({className:b()(y,O)},P),f().createElement(L,{className:r},f().createElement(B,{label:$,icon:h,suffixIcon:Y,onClick:X,tabIndex:I,"aria-label":x,"aria-expanded":V})),f().createElement("div",{ref:e=>{e&&(K.current=e)},className:b()(V?R.XR:R.sK,t),style:{maxHeight:V?q:0}},f().createElement("div",{className:n},U&&k)))}},36841:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});const r=1e3},95703:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(85959);const s=e=>{const t=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(t.current=!0,()=>{t.current=!1})),[]),(0,r.useCallback)(((n,r)=>{setTimeout((()=>{t.current&&n()}),null!=r?r:e)}),[])}},25964:function(e,t,n){"use strict";n.d(t,{WJ:function(){return g},di:function(){return N},Kw:function(){return D},XL:function(){return w},te:function(){return T},Vh:function(){return L},RG:function(){return V},GN:function(){return f},nl:function(){return W},aB:function(){return H}});var r=n(77701),s=n(5073),o=n(75839),a=n(2673),i=n(52130),c=n(10170),l=n(30812),u=n.n(l),m=n(85959),d=n.n(m),b=n(36093);function p(e){let{maxWidth:t,className:n}=e;return m.createElement("svg",{width:"128",height:"128",viewBox:"0 0 128 128",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"auto",maxWidth:t},className:n},m.createElement("path",{d:"M6.40039 60.7998V121.6H121.6V60.7998",stroke:"var(--color-text-primary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M96 76.8002V54.4002C96 52.6329 94.5673 51.2002 92.8 51.2002H64H35.2C33.4327 51.2002 32 52.6329 32 54.4002V74.9884C32 76.1124 32.5898 77.1541 33.5536 77.7324L54.1217 90.0732C60.202 93.7214 67.798 93.7214 73.8783 90.0732L96 76.8002Z",fill:"var(--color-text-interactive)"}),m.createElement("path",{d:"M78.4004 61.3931L60.8004 77.3931L52.8004 69.3931",stroke:"var(--color-text-inverse)",strokeWidth:"3.2",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M121.6 60.7996L74.3375 90.9954C68.0344 95.0223 59.9664 95.0223 53.6633 90.9954L6.40039 60.7996",stroke:"var(--color-text-primary)",strokeWidth:"3.2",strokeLinejoin:"round"}),m.createElement("path",{d:"M121.6 60.8L74.3375 30.6042C68.0344 26.5773 59.9664 26.5773 53.6633 30.6042L6.40039 60.8",stroke:"var(--color-text-primary)",strokeWidth:"3.2",strokeLinejoin:"round"}),m.createElement("path",{d:"M100.8 14.4004L89.5996 25.6004",stroke:"var(--color-text-secondary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M27.2004 14.4004L38.4004 25.6004",stroke:"var(--color-text-secondary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M64 3.2002V17.6002",stroke:"var(--color-text-secondary)",strokeWidth:"3.2",strokeLinecap:"round",strokeLinejoin:"round"}))}function f(e){let{text:t,email:n,children:r=[]}=e;return m.createElement("div",{tabIndex:-1,style:{outline:"none"},className:o.Vg8},m.createElement("div",{className:o.nME},m.createElement("div",{className:u()(o.nzo,o.Srn,o.SwH)},m.createElement(p,{maxWidth:128,className:u()(s.lX,s.FH)}),m.createElement(p,{maxWidth:80,className:s.S8})),m.createElement("div",{className:u()(o.nzo,o.Srn,o.WEn,c.aUF,c.XeA)},m.createElement(a.Ay,{tag:"h3",preset:i.nx.h4},t.title),m.createElement(a.Ay,{preset:i.nx.h4,font:i.KQ.serif,style:{fontWeight:400}},t.subtitle),m.createElement("div",{className:c.aUF},m.createElement(a.Ay,{className:u()(b.xB),preset:i.nx.bodyBold,color:i.r7.secondary},n)),m.createElement(a.Ay,{preset:i.nx.body,font:i.KQ.serif,style:{fontWeight:400}},t.body),r&&m.createElement("div",{className:c.Ol8},r))))}var E=n(23215),y=n(96545),_=n(71016);var v=e=>(0,m.useCallback)((function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(t in e)return e[t]||"";throw new Error("Translation key "+t+" not found")}),[e]);function g(e){let{amount:t,translations:n}=e;const r=v(n);return m.createElement(_.A,{logo:"LoyaltyPointsShortTile",logoLabel:""+t,label:r("loyalty_points.missions.newsletter.premise.points"),size:"s"})}function w(e){let{amount:t,translations:n}=e;const r=v(n);return m.createElement(_.A,{logo:"LoyaltyPointsShortTile",logoLabel:t?""+t:void 0,label:r("loyalty_points.missions.newsletter.doi.consent.points.pending"),size:"s"})}function N(e){let{amount:t,translations:n}=e;const r=v(n);return m.createElement("div",null,m.createElement(_.A,{logo:"LoyaltyPointsShortTile",logoLabel:t?""+t:void 0,label:r("loyalty_points.missions.newsletter.premise.points"),size:"s"}),m.createElement(E.A,{className:c.Ol8,size:y.s.medium,href:"/plus"},r("loyalty_points.missions.newsletter.confirmation.explore")))}var S=n(51599),A=n(56020),h=n(9049),k=n(36124),I=n(64631),x=n(42768);function L(e){let{label:t,email:n,referrer:r,tools:s,track:o,preset:c=i.nx.bodySmall,className:l,translations:u}=e;const[d,b]=m.useState(!1),[p,f]=m.useState(!1),E=v(u),y=()=>{setTimeout((()=>{b(!1),f(!1)}),1500)};return m.createElement("div",l&&{className:l},m.createElement(a.Ay,{tag:"button",style:{cursor:"pointer"},preset:c,color:i.r7.interactive,onClick:async()=>{var e;o(s);const t=await s.executeMutation({...I,variables:{input:{email:n,referrer:r,clientMutationId:Date.now().toString()}}});(null==t||null==(e=t.data)?void 0:e.resendNewsletterVerificationEmail)?(b(!0),f(!1),y()):(b(!1),f(!0),y())}},t),m.createElement("span",{"aria-live":"polite"},d&&m.createElement("span",null,m.createElement("span",{className:x.R},E("account.pc.button.success")),m.createElement(k.A,{src:A.A,color:"custom",className:S.ca5,style:{verticalAlign:"middle",fontSize:"16px"}})),p&&m.createElement("span",null,m.createElement("span",{className:x.R},E("account.pc.button.error")),m.createElement(k.A,{src:h.A,color:"custom",className:S.s9c,style:{verticalAlign:"middle",fontSize:"16px"}}))))}var C=n(41225);const O="\n  .newsletter-legal-link > span{\n    font-size: "+C.typographyBodyExtraSmallFontSize+";\n    line-height: "+C.typographyBodyExtraSmallLineHeight+";\n    letter-spacing: "+C.typographyBodyExtraSmallLetterSpacing+";\n  }\n";function T(e){let{tools:t,track:n,translations:r}=e;const s=v(r),o=s("new.newsletter.subscription.footer.privacy","{0}","{1}").split(/{(\d+)}/g),c=[d().createElement(E.A,{key:"privacy-policy",className:"newsletter-legal-link",href:s("link.privacyPolicy")+s("link.privacyPolicy.newsletter"),target:"_blank",onClick:()=>{n(t)}},s("newsletter.subscription.footer.privacy.policy")),d().createElement(E.A,{key:"unsubscribe",className:"newsletter-legal-link",href:s("link.faq.unsubscribe"),target:"_blank",onClick:()=>{n(t)}},s("newsletter.subscription.footer.privacy.unsubscribe"))];return d().createElement(a.Ay,{preset:i.nx.bodyExtraSmall,color:i.r7.secondary},d().createElement("style",{dangerouslySetInnerHTML:{__html:O}}),d().createElement("p",null,o.map((e=>{const t=parseInt(e,10);return isNaN(t)?e:c[t]}))))}var R=n(76349),M=n(85202);function D(e){let{trackPageView:t,trackRetryClick:n,translations:r}=e;const[s,o]=m.useState(R.w.INITIAL),l=v(r);return m.useEffect((()=>{t()}),[]),m.createElement("div",null,m.createElement("div",{className:u()(c.nmT)},m.createElement(a.Ay,{preset:i.nx.h4,font:i.KQ.serif},"Oops"),m.createElement(a.Ay,{tag:"p",preset:i.nx.body,font:i.KQ.serif},l("account.pc.error.message"))),m.createElement(M.j,{style:{maxWidth:200},onClick:()=>{o(R.w.LOADING),n(),setTimeout((()=>{window.location.reload()}),2e3)},label:l("unsubscribe.error.unsubscribing.button"),state:s}))}var B=n(28562);function W(e){let{onChange:t,topics:n,isSlim:r}=e;return m.createElement("div",{className:c.Ol8},m.createElement("div",{className:o.nME},n.map((e=>m.createElement("div",{className:u()(o.nzo,o.Srn,o.UKO,b.c1,r?c.uvl:c.nmT),key:e.id},m.createElement(B.A,{id:e.id,onChange:n=>t(e,n),checked:e.isEnabled,label:e.name,"aria-describedby":"topic_"+e.id}),!r&&m.createElement(a.Ay,{id:"topic_"+e.id,preset:i.nx.body,tag:"p",className:c.QgQ},e.description))))))}var P=n(67205);function V(e){let{value:t,onChange:n,translations:r}=e;const s=v(r),o=[{id:"1",label:s("subscribe.gender.selection.female"),value:"WOMEN"},{id:"2",label:s("subscribe.gender.selection.male"),value:"MEN"}];return m.createElement("div",null,m.createElement(a.Ay,{preset:i.nx.h4},s("subscribe.gender.selection")),m.createElement("div",{className:u()(c.aUF,c.FOb)},m.createElement(P.A,{name:"category",defaultValue:t,onChange:e=>n(e),options:o})))}var z=n(76309),U=n(73127),F=n(58779),K=n(27801),G=n(32425),j=n(86562),Q=n(36841),X=n(95703);const q={[r.ls.NEWSLETTER_PREFERENCES]:G,[r.ls.NEWSLETTER_UNSUBSCRIPTION]:K};function H(e){let{consent:t,email:n,onUnsubscriptionDone:r,tools:s,isWebView:l,trackPageView:d,trackUnsubscribeClick:b,trackTechnicalErrorView:p,rendererName:f,translations:E}=e;const[y,_]=m.useState(R.w.INITIAL),[g,w]=m.useState(!1),N=v(E),S=J({tools:s,rendererName:f,consentId:t.id,isWebView:l}),A=(0,X.P)(Q.u);return m.createElement("div",null,m.createElement("div",{className:c.uvl},m.createElement(a.Ay,{preset:i.nx.h4},N("customer.newsletterAbo.unsubscribe.title")),m.createElement(a.Ay,{preset:i.nx.body},N("customer.newsletterAbo.unsubscribe.mail",n))),m.createElement("div",{className:o.Srn},g&&m.createElement(F.A,{className:c.uvl,iconColor:"red",icon:m.createElement(k.A,{src:z.A}),label:N("account.pc.error.message")}),m.createElement("div",{className:u()(c.uvl,c.aUF)},m.createElement(U.t,{style:{maxWidth:"100%"},onClick:async()=>{_(R.w.LOADING),b();const[e]=await(0,j.$)([S()]);e?r(e.newsletterConsent):(w(!0),_(R.w.ERROR),A((()=>_(R.w.INITIAL))),p())},label:N("customer.newsletterAbo.unsubscribe.button"),disabled:R.w.LOADING===y,state:y,icon:m.createElement(k.A,{src:h.A}),"aria-describedby":"unsubscribe-note"})),m.createElement(a.Ay,{id:"unsubscribe-note",preset:i.nx.bodyExtraSmall,color:i.r7.secondary},N("account.pc.save.note"))))}const J=e=>{let{tools:t,rendererName:n,consentId:s,isWebView:o}=e;return m.useCallback((async()=>{var e;const a=await t.executeMutation({...q[n],variables:{input:{...!s.includes("default")&&{consentReferenceId:s.replace("ern:nlconsent::","")},referrer:o?r.Gl.APP:r.Gl.WEB,clientMutationId:Date.now().toString()}}});return null==a||null==(e=a.data)?void 0:e.unsubscribeFromNewsletter}),[t,n,s,o])}},77701:function(e,t,n){"use strict";var r,s,o,a,i,c,l;n.d(t,{b7:function(){return o},YT:function(){return l},Pw:function(){return r},F2:function(){return s},Q9:function(){return a},Gl:function(){return i},ls:function(){return c}}),function(e){e.AVAILABLE="AVAILABLE",e.COMPLETED="COMPLETED"}(r||(r={})),function(e){e.ELIGIBLE="ELIGIBLE",e.NOT_ELIGIBLE="NOT_ELIGIBLE",e.ACTIVE="ACTIVE"}(s||(s={})),function(e){e.MEN="MEN",e.WOMEN="WOMEN"}(o||(o={})),function(e){e.NOT_SUBSCRIBED="NOT_SUBSCRIBED",e.UNSUBSCRIBED="UNSUBSCRIBED",e.SUBSCRIBED_VERIFICATION_NOT_NEEDED="SUBSCRIBED_VERIFICATION_NOT_NEEDED",e.SUBSCRIBED_VERIFICATION_NEEDED="SUBSCRIBED_VERIFICATION_NEEDED",e.SUBSCRIBED_VERIFIED="SUBSCRIBED_VERIFIED"}(a||(a={})),function(e){e.EMAIL="inbox_preferences_email",e.WEB="inbox_preferences_web",e.APP="nl_preference_center_app",e.DOI_RESEND_WEB="doi_resend_nl_subscription_inbox_preferences",e.DOI_RESEND_APP="doi_resend_nl_preference_center_app"}(i||(i={})),function(e){e.NEWSLETTER_UNSUBSCRIPTION="unsubscription",e.NEWSLETTER_PREFERENCES="preferences"}(c||(c={})),function(e){e.FEMALE="FEMALE",e.MALE="MALE"}(l||(l={}))},86562:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});const r=async e=>{const t=await Promise.all([...e,new Promise((e=>setTimeout(e,1e3)))]);return t.pop(),t}},79958:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"newsletter-consent_banner":["newsletter.subscription.footer.title","newsletter.subscription.footer.subtitle","newsletter.subscription.footer.headline","subscribe.DOI.success.resend.verification","subscribe.DOI.success.subtitle","subscribe.DOI.success.title","subscribe.DOI.success.description","subscribe.SOI.success.subtitle","subscribe.SOI.success.title","subscribe.SOI.success.description","loyalty_points.missions.newsletter.doi.consent.points.pending","loyalty_points.missions.newsletter.premise.points","loyalty_points.missions.newsletter.confirmation.explore","account.pc.button.success","account.pc.button.error","newsletter.subscription.footer.email","subscribe.error.message","newsletter.subscription.footer.preferences.headline","newsletter.subscription.footer.preferences.subheadline","loyalty_points.zhome.missions.newsletter.email","newsletter.subscription.footer.cta","new.newsletter.subscription.footer.privacy","link.privacyPolicy","link.privacyPolicy.newsletter","newsletter.subscription.footer.privacy.policy","link.faq.unsubscribe","newsletter.subscription.footer.privacy.unsubscribe","newsletter.subscription.footer.option.women","newsletter.subscription.footer.option.men","subscribe.gender.selection.error","newsletter.subscription.footer.disclaimer.voucher","newsletter.subscription.footer.disclaimer","newsletter.subscription.footer.preferences.more","account.pc.preference.error","newsletter.subscription.footer.more.info","customer.newsletter.subscribe.failed"]}},20013:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return be}});var r=n(32740),s=n(85959),o=n.n(s),a=n(51599),i=n(38856),c=n(75839),l=n(5010),u=n(41959),m=n(8840),d=n(2673),b=n(52130),p=n(10170),f=n(14410),E=n(30812),y=n.n(E),_=n(77701);var v=(0,s.createContext)({}),g=n(25964),w=n(89862);const N="newsletter subscription banner",S=e=>e?"on":"off";function A(e){let{customCategory:t,customLabel:n}=e;return{name:"view_content",context:{legacy_event_name:w.wc,customCategory:t,customLabel:n}}}function h(e){let{customCategory:t,customLabel:n}=e;return{name:"select_content",context:{legacy_event_name:w.bD,customCategory:t,customLabel:n}}}const k=e=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:"voucher detail"}))},I=e=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:"DOI confirmation resend"}))};function x(e){let{isVerificationRequired:t,email:n}=e;const{tools:r,loyaltyMission:o,customer:a,canCompleteMission:i}=s.useContext(v),c=L(t,n),l=(null==a?void 0:a.email)===n;let u;var m,d;i&&l&&(u=t?s.createElement(g.XL,{amount:null==o||null==(m=o.points)?void 0:m.amount,translations:C()}):s.createElement(g.di,{amount:null==o||null==(d=o.points)?void 0:d.amount,translations:O()}));return s.createElement(g.GN,{text:c,email:n},u,t&&s.createElement(g.Vh,{tools:r,email:n,label:__("subscribe.DOI.success.resend.verification"),referrer:"doi_resend_nl_subscription_banner_one_click",track:I,preset:b.nx.bodyExtraSmall,className:p.Ol8,translations:T()}))}const L=(e,t)=>e?{title:__("subscribe.DOI.success.subtitle"),subtitle:__("subscribe.DOI.success.title"),body:__("subscribe.DOI.success.description",t)}:{title:__("subscribe.SOI.success.subtitle"),subtitle:__("subscribe.SOI.success.title"),body:__("subscribe.SOI.success.description",t)},C=()=>({"loyalty_points.missions.newsletter.doi.consent.points.pending":__("loyalty_points.missions.newsletter.doi.consent.points.pending")}),O=()=>({"loyalty_points.missions.newsletter.premise.points":__("loyalty_points.missions.newsletter.premise.points"),"loyalty_points.missions.newsletter.confirmation.explore":__("loyalty_points.missions.newsletter.confirmation.explore")}),T=()=>({"account.pc.button.success":__("account.pc.button.success"),"account.pc.button.error":__("account.pc.button.error")});var R=n(89581),M=n(76309),D=n(36124),B=n(76349),W=n(85202),P=n(24741),V=n(76447),z=n(78792),U=n(35525);var F=n(4955),K=n(15842);const G=["sk","ee","hu","ro","lt","hr","lv","cz","si"];function j(){const{tools:e,tld:t}=o().useContext(v);if(!G.includes(t))return null;const[n,r]=o().useState(!1);return o().createElement("div",{className:p.QgQ},o().createElement(d.Ay,{tag:"span",preset:b.nx.bodyExtraSmallBold,onClick:()=>{n||k(e),r((e=>!e))},style:{cursor:"pointer"},color:b.r7.secondary},__("newsletter.subscription.footer.disclaimer.voucher")," ",o().createElement(Q,{up:n})),n&&o().createElement(d.Ay,{tag:"p",preset:b.nx.bodyExtraSmall,color:b.r7.secondary},__("newsletter.subscription.footer.disclaimer")))}const Q=e=>{let{up:t}=e;return t?o().createElement(D.A,{src:F.A,style:{verticalAlign:"middle",fontSize:12}}):o().createElement(D.A,{src:K.A,style:{verticalAlign:"middle",fontSize:12}})};var X=n(67205);function q(e){let{value:t,onChange:n,disabled:r,showError:s=!1}=e;const a=[{id:"1",label:__("newsletter.subscription.footer.option.women"),value:_.b7.WOMEN},{id:"2",label:__("newsletter.subscription.footer.option.men"),value:_.b7.MEN}];return o().createElement(X.A,{name:"category",defaultValue:t,disabled:r,onChange:n,options:a,message:s?H(__("subscribe.gender.selection.error")):void 0})}const H=e=>({type:P.G.ERROR,icon:o().createElement(D.A,{src:M.A}),label:e});var J=n(66290),Z=n(28562),Y=n(33221),$=n(24832),ee=n(36093);function te(e){let{topics:t,onTopicChange:n,disabled:r,showError:s}=e;const{tools:a}=o().useContext(v);return o().createElement(J.n,{className:p.aUF,title:__("newsletter.subscription.footer.preferences.more"),ariaLabel:__("newsletter.subscription.footer.preferences.more"),titlePreset:"body",onClick:()=>{(e=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:"content options"}))})(a)}},t.length?o().createElement("div",{className:y()(c.Vg8)},o().createElement("div",{className:c.nME},t.map((e=>o().createElement(Z.A,{id:e.id,key:e.id,disabled:r,className:y()(c.nzo,c.Srn,c.UKO,p.aUF,ee.c1),onChange:t=>n(e,t),label:e.name,checked:e.isEnabled}))),s&&o().createElement("div",{className:y()(c.nzo,c.Srn,p.aUF)},o().createElement(d.Ay,{tag:"p",preset:b.nx.bodyExtraSmall,color:b.r7.negative,"aria-live":"polite"},o().createElement(D.A,{src:M.A,fontSize:"custom",className:f.eA,color:"brand"})," ",__("account.pc.preference.error"))),o().createElement("div",{className:y()(c.nzo,c.Srn,$.w9,p.aUF)},o().createElement(Y.A,{href:"/messages",onClick:()=>{(e=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:"see more"}))})(a)}},__("newsletter.subscription.footer.more.info"))))):o().createElement(d.Ay,{preset:b.nx.bodySmall},__("customer.newsletter.subscribe.failed")))}function ne(e){let{onSuccess:t}=e;var n;const{consent:r,customer:o,tools:a,subscriptionReferrer:i,loyaltyMission:l,canCompleteMission:u}=s.useContext(v),[m,f]=s.useState(r.preference.topics.map((e=>({...e,isEnabled:!0})))),[E,w]=s.useState(r.email||(null==o?void 0:o.email)||""),[I,x]=s.useState((null==(n=r.preference)?void 0:n.category)||((L=null==o?void 0:o.gender)===_.YT.FEMALE?_.b7.WOMEN:L===_.YT.MALE?_.b7.MEN:void 0));var L;const[C,O]=s.useState(!1),[T,M]=s.useState(!1),[P,F]=s.useState(!1),[K,G]=s.useState(!1),[Q,X]=s.useState(!1),[H,J]=s.useState(!1),Z=async()=>{var e;G(!0),X(!1),J(!1);const n=await a.executeMutation({...U,variables:{input:{email:E,preference:{category:I,topics:m.map((e=>({id:e.id,isEnabled:e.isEnabled})))},referrer:i,clientMutationId:Date.now().toString()}}}),r=null==n||null==(e=n.data)?void 0:e.subscribeToNewsletter;r?(((e,t)=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:t.map((e=>e.id+" : "+S(e.isEnabled))).join(" | ")}))})(a,m),G(!1),X(!0),setTimeout((()=>{X(!1),t(r.email,r.isEmailVerificationRequired)}),1500)):(G(!1),J(!0),setTimeout((()=>{J(!1)}),1500))},Y=l&&u&&!r.isActive;return s.createElement("div",null,s.createElement("form",{className:p.g5R,onSubmit:e=>{const t=!m.some((e=>e.isEnabled)),n=!function(e){var t,n;if(!e)return!1;if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()))return!1;const r=e.split("@"),s=null==(t=r[0])?void 0:t.length,o=null==(n=r[1])?void 0:n.length;return!(!s||!o)&&s<=64&&o<=255}(E),r=!I;e.preventDefault(),(e=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:"subscribe button"}))})(a),M(!1),F(!1),O(!1),n&&(M(n),(e=>{e.tracking.trackStandalone(A({customCategory:N,customLabel:"invalid email"}))})(a)),t&&(F(t),(e=>{e.tracking.trackStandalone(A({customCategory:N,customLabel:"no preference error"}))})(a)),r&&(O(r),(e=>{e.tracking.trackStandalone(A({customCategory:N,customLabel:"no fashion preference error"}))})(a)),r||n||t||Z()}},s.createElement("div",{className:c.Vg8},s.createElement("div",{className:c.nME},s.createElement("div",{className:y()(c.nzo,c.Srn,p.g5R)},s.createElement(V.A,{id:"email-input",label:__("newsletter.subscription.footer.email"),value:E,type:z.M.EMAIL,disabled:K,message:T?re(__("subscribe.error.message")):void 0,onChange:e=>{w(e.target.value)},onFocus:()=>{(e=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:"email form"}))})(a)}})),s.createElement("div",{className:y()(c.nzo,c.Srn,c.UKO)},s.createElement(d.Ay,{tag:"h3",preset:b.nx.bodyBold},__("newsletter.subscription.footer.preferences.headline")),s.createElement(d.Ay,{tag:"p",preset:b.nx.body,font:b.KQ.serif},__("newsletter.subscription.footer.preferences.subheadline"))),s.createElement("div",{className:y()(c.nzo,c.Srn,c.UKO,p.aUF,p.XeA)},s.createElement(q,{value:I,disabled:K,onChange:e=>{const t=e;x(t),((e,t)=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:t.toLowerCase()+" toggle"}))})(a,(e=>e===_.b7.WOMEN?_.YT.FEMALE:e===_.b7.MEN?_.YT.MALE:void 0)(t))},showError:C})),s.createElement("div",{className:y()(c.nzo,c.Srn)},s.createElement(te,{topics:m,disabled:K,onTopicChange:(e,t)=>{f(m.map((n=>n.id===e.id?{...n,isEnabled:t}:n))),((e,t,n)=>{e.tracking.trackStandalone(h({customCategory:N,customLabel:t+".email subscription "+S(n)}))})(a,e.name,t)},showError:P})),s.createElement("div",{className:y()(c.nzo,c.Srn,p.Ol8)},Y&&s.createElement("div",{className:p.uvl},s.createElement(g.WJ,{translations:se(),amount:l.points.amount}),s.createElement(d.Ay,{tag:"p",color:b.r7.grey47,preset:b.nx.bodyExtraSmall,className:p.IuD},__("loyalty_points.zhome.missions.newsletter.email"))),s.createElement(W.j,{label:__("newsletter.subscription.footer.cta"),state:K?B.w.LOADING:H?B.w.ERROR:Q?B.w.SUCCESS:B.w.INITIAL,type:"submit",style:{width:"100%"},icon:s.createElement(D.A,{src:R.A})}))))),s.createElement(g.te,{tools:a,track:k,translations:oe()}),s.createElement(j,null))}const re=e=>({type:P.G.ERROR,icon:s.createElement(D.A,{src:M.A}),label:e}),se=()=>({"loyalty_points.missions.newsletter.premise.points":__("loyalty_points.missions.newsletter.premise.points")}),oe=()=>({"new.newsletter.subscription.footer.privacy":__("new.newsletter.subscription.footer.privacy","{0}","{1}"),"link.privacyPolicy":__("link.privacyPolicy"),"link.privacyPolicy.newsletter":__("link.privacyPolicy.newsletter"),"newsletter.subscription.footer.privacy.policy":__("newsletter.subscription.footer.privacy.policy"),"link.faq.unsubscribe":__("link.faq.unsubscribe"),"newsletter.subscription.footer.privacy.unsubscribe":__("newsletter.subscription.footer.privacy.unsubscribe")});function ae(){const{consent:e,tld:t}=s.useContext(v),[n,r]=s.useState(e.status===_.Q9.SUBSCRIBED_VERIFICATION_NEEDED),[o,a]=s.useState(n),[i,c]=s.useState(n?e.email:"");return s.createElement(ce,{tld:t},!o&&s.createElement(ne,{onSuccess:(e,t)=>{a(!0),c(e),r(t)}}),o&&s.createElement(x,{email:i,isVerificationRequired:n}))}const ie=e=>{let{tld:t}=e;return s.createElement("div",null,s.createElement(d.Ay,{tag:"h2",preset:b.nx.h4},__("newsletter.subscription.footer.title")),s.createElement(d.Ay,{tag:"p",preset:b.nx.h4,font:b.KQ.serif,style:{fontWeight:400}},__("newsletter.subscription.footer.subtitle")),s.createElement("div",{className:p.aUF},s.createElement(d.Ay,{preset:b.nx.body,font:b.KQ.serif},__("newsletter.subscription.footer.headline",t))))},ce=e=>{const t={root:y()(f.mN),contentRow:y()(c.nME,i.Gs,c.Qcg,p.XfK,c.LQL,c.D0i),contentGrid:c.sm9};return s.createElement(l.Ay,{styles:t,style:{overflowX:"hidden"}},s.createElement(u.A,{className:a.JSK},s.createElement(m.A,null,s.createElement("div",{className:y()(c.nzo,c.W_8,c.Tap,c.UKO,c.NW$,c.Wtb,c.ATT)},s.createElement("div",{className:y()(p.Bmg)},s.createElement(ie,{tld:e.tld}))),s.createElement("div",{className:y()(c.nzo,c.NW$,c.Txi,c.UKO,i.oD)},s.createElement("div",{className:y()(a.GUV,p.XfK,p.Bmg,p.cgu,p.zRf,p.g6U,p.g5R,p.EVd)},e.children)))))};var le=n(65470),ue=n(69218),me=n(4048),de=n(50068),be=(0,r.tile)().withQueries((()=>({consent:{query:ue},customer:{query:le},loyaltyMission:{query:me},loyaltyProgram:{query:de}}))).withTracking((e=>({resolve:()=>({context:{id:e.entity.id}})}))).withProcessDependencies((e=>{var t,n,r;const s=null==(t=e.consent)?void 0:t.newsletterConsent,o=e.loyaltyMission.loyaltyPointsMission,a=null==(n=e.loyaltyProgram.loyaltyPointsProgram)?void 0:n.loyaltyStatus,i=o&&((e,t)=>e===_.F2.ACTIVE&&t.status===_.Pw.AVAILABLE)(a,o);return s?{action:"render",data:{customer:null==(r=e.customer)?void 0:r.customer.details,consent:s,canCompleteMission:i,loyaltyMission:o}}:{action:"error",message:"could not fetch NewsletterConsent"}})).withRender((e=>{const t=e.data.customer,n=e.data.consent,o=e.data.canCompleteMission,a=e.data.loyaltyMission,i=e.context.navigation.url.host.split(".").pop(),c=e.ruleData.isStandaloneView;let l="nl_subscription_banner_one_click";if(c){const t=e.context.navigation.url.query.c_ref;l=(Array.isArray(t)?t[0]:t)||"nl_subscription_page"}return n.isActive&&!c?null:s.createElement(r.ViewTracker,{onVisible:()=>{e.tools.tracking.trackStandalone(A({customCategory:N,customLabel:"one click banner footer"}))}},s.createElement(v.Provider,{value:{consent:n,customer:t,tld:i,tools:e.tools,subscriptionReferrer:l,canCompleteMission:o,loyaltyMission:a}},s.createElement(ae,null)))}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(79958),t(20013)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/newsletter-consent_banner/index-864aa643935334978a98.map