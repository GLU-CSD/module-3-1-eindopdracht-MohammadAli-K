define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,a){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[63490],{65354:function(e){e.exports={id:"58e717ba99b1eba45844d73d4912779735e9107fa0fe96814bc67f234c330c2a"}},39292:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"information-banner":["header.usp.chat.title","header.usp.chat","header.usp.shipping.title","header.usp.shipping.AbTest","header.usp.retour.title","header.usp.retour","main.close"]}},31178:function(e,t,n){"use strict";n.r(t),n.d(t,{EVENT_BANNER_CANCEL_LINK:function(){return D},EVENT_BANNER_CLICK_LINK:function(){return T},default:function(){return M}});var a=n(32740),o=n(85959),r=n(21775),i=n(65354),s=n(30812),c=n.n(s),l=n(75839),u=n(10170),d=n(2673),m=n(52130),p=n(9049),g=n(36124),h=n(3906),f=n(58777),_=n(24832),b=n(38856),E=n(15184);const y="{#countdown}";function N(e){return e<10?"0"+e:String(e)}function k(e,t){const n=function(e,t){if(!t)return"";const n=Date.parse(t);if(isNaN(n))return"";const a=Math.max(n-e,0),o=Math.floor(a/1e3);return[Math.floor(o/3600),Math.floor(o/60)%60,o%60].map(N).join(":")}(t,e.publicationEnd);return e.text.replace(y,n)}var v=e=>{let{onClose:t,onLinkClick:n,onLoad:a,banner:r}=e;o.useEffect(a,[]);const[i,s]=o.useState(Date.now());o.useEffect((()=>{if(r.text.includes(y)){const e=setTimeout((()=>s(Date.now())),1e3);return()=>clearTimeout(e)}}));const N=r.text.includes(y)?k(r,i):r.text;return o.createElement("div",{"data-testid":"information-banner",className:E.yP,style:{background:r.backgroundColor,maxWidth:"100vw"}},o.createElement("div",{className:l.Vg8},o.createElement("div",{className:c()(b.Fn,l.nME)},o.createElement("div",{className:c()(_.Ig,l.nzo,l.Odg,l.FJc,l.YyF,u.LXt,u.vJI)},o.createElement(d.Ay,{tag:"p",preset:m.nx.bodyExtraSmall,font:m.KQ.sansSerif,dangerouslySetInnerHTML:{__html:N.replace("<a href",'<a style="text-decoration:none" href')},style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"},onClick:e=>{"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),n())}})),r.isCloseable&&o.createElement("div",{style:{paddingRight:0},className:c()(l.nzo,l.iKK,_.Lk)},o.createElement(h.A,{"aria-label":__("main.close"),preset:f.lH.transparent,label:__("main.close"),size:"small",onClick:t,type:"button"},o.createElement(g.A,{src:p.A,style:{width:16,height:16}}))))))},S=n(89862);function x(e){return{name:S.bD,context:e}}const C="header";function L(e){return t={customCategory:C,customLabel:"infobanner."+e},{name:S.n6,context:t};var t}function w(e){return e.split(" ").join("_").toLowerCase()}var A=n(5073),B=n(51599);var I=e=>{let{track:t}=e;return o.createElement("div",{"data-testid":"usp-bar",className:c()(B.F9z,A.YW,A.Ll)},o.createElement("div",{className:l.Vg8},o.createElement("div",{className:c()(l.nME,b.Fn),style:{height:"2rem",lineHeight:"2rem"}},o.createElement(d.Ay,{className:c()(l.nzo,l.PwV,_.Ae,B.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"chat",title:__("header.usp.chat.title"),dangerouslySetInnerHTML:{__html:__("header.usp.chat")},onClick:()=>t(x({customCategory:C,customLabel:"usp.support"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.Ay,{className:c()(l.nzo,l.PwV,_.Ig,B.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"shipping",title:__("header.usp.shipping.title"),dangerouslySetInnerHTML:{__html:__("header.usp.shipping.AbTest")},onClick:()=>t(x({customCategory:C,customLabel:"usp.shipping"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.Ay,{className:c()(l.nzo,l.PwV,_.Lk,B.P6Z),preset:m.nx.bodyExtraSmallBold,color:m.r7.secondary,key:"retour",title:__("header.usp.retour.title"),dangerouslySetInnerHTML:{__html:__("header.usp.retour")},onClick:()=>t(x({customCategory:C,customLabel:"usp.returns"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}))))};const T="header:banner:click-link",D="header:banner:cancel-link";var M=(0,a.tile)().withQueries((e=>{let{context:t}=e;return{data:{query:i,variables:{url:t.navigation.url.href,navigationTargetGroup:t.intent.navigationTargetGroup},doNotBatch:!0}}})).withTracking((e=>({resolve:()=>({context:{id:e.entity.id}})}))).withProcessDependencies(((e,t)=>{let{tools:{cookies:n},ruleData:{hideUspBar:a}}=t;var o;const r=n.get("information_banner_closed")||{},i=null==e||null==(o=e.data)?void 0:o.informationBanner;return{action:"render",data:{informationBanner:i,closedBanners:r,isBannerClosed:!!i&&i.id in r,hideUspBar:a}}})).withRender((e=>{let{data:{informationBanner:t,isBannerClosed:n,closedBanners:i,hideUspBar:s},tools:{cookies:c,tracking:l},ruleData:u}=e;const[d,m]=o.useState(n),p=l.track;var g;const h=null!=(g=null==t?void 0:t.campaignName)?g:"",f={enableStandaloneInShadow:Boolean(u.enableStandaloneInShadow),enableStandaloneOnly:Boolean(u.enableStandaloneOnly)},_=Object.keys(i).filter((e=>{const t=i[e]||"";return new Date<new Date(t)})).reduce(((e,t)=>(e[t]=i[t]||"",e)),{});return t&&!d?o.createElement(v,{banner:t,onClose:()=>{(0,a.requestIdleCallback)((()=>{m(!0),(null==t?void 0:t.id)&&(i[t.id]=t.publicationEnd,c.set("information_banner_closed",{..._,[t.id]:t.publicationEnd},365),p(function(e){return x({customCategory:C,customActionSuffix:"close",customLabel:"infobanner."+e})}(h),f),l.trackStandalone(function(e){let{campaignName:t}=e;return{name:"select_content",context:{legacy_event_name:S.bD,event_trigger_name:w("close.infobanner."+t)}}}({campaignName:h}),f))}))},onLoad:()=>{p(L(h),f),l.trackStandalone(function(e){let{campaignName:t}=e;return{name:"load_content",context:{legacy_event_name:S.Zz,event_trigger_name:w("infobanner."+t)}}}({campaignName:h}),f)},onLinkClick:()=>{r.trigger(T,{banner:t}),p(function(e){return x({customCategory:C,customLabel:"infobanner."+e})}(h),{useBeacon:!0,...f}),l.trackStandalone(function(e){let{campaignName:t}=e;return{name:"select_content",context:{legacy_event_name:S.bD,event_trigger_name:w("click.infobanner."+t)}}}({campaignName:h}),f);const e=t.text.match(/<a\s+(?:[^>]*?\s+)?href='([^']*)'/),n=e&&e[1];if(n){let e=!1;r.on(D,(()=>{e=!0})),setTimeout((()=>{e||(window.location.href=n)}),200)}}}):s?null:o.createElement(I,{track:p})}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=a}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(39292),t(31178)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/information-banner/index-b89b078959a2be195a96.map